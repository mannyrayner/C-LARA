{
  "created_at": "2025-12-27T06:56:48.099956+00:00",
  "root": "clara_app",
  "count": 192,
  "entries": [
    {
      "url_name": "access_archived_images",
      "callable": "clara_app.images_v1_views.access_archived_images",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "activity_detail",
      "callable": "clara_app.activity_tracker_views.activity_detail",
      "module_repo_path": "clara_app/activity_tracker_views.py",
      "short_summary": "This module defines Django views for creating, viewing, updating, and listing activities within the application. It supports commenting, registration, status/resolution changes, and weighted voting on activities, and sends email notifications to relevant users when new comments are posted. Admin-only views provide a plain text summary for AI consumption and accept AI-submitted activity updates and votes. Helpers annotate activity querysets with vote scores and status ordering for display.",
      "proposed_docstring": "Views for the activity tracker: handle creation of new activities, display and update of individual activity records with comments, registrations, voting, status and resolution changes, and notification of participants by email. Provides list views for browsing activities, including an admin-only plain text summary intended for AI integration, and accepts AI-generated updates, comments, new activities and votes. Utilities are provided to annotate and order activity querysets for display and to enforce weekly voting uniqueness via get_zoom_meeting_start_date.",
      "key_responsibilities": [
        "Create new activities via ActivityForm and redirect to detail views",
        "Render activity detail pages with commenting, registration, status/resolution updates, and vote handling tied to weekly periods",
        "Notify activity creators, voters, and commenters of new comments via email templating and environment-aware sending",
        "List activities with search/filter options and annotate them with vote scores and status ordering for display",
        "Provide an admin-only plain text activity summary with instructions/examples for AI updates, and process AI-submitted comments, new activities, and votes"
      ],
      "potential_issues": [
        "create_activity does not render the form with errors on invalid POST and may return None, leading to a server error",
        "activity_detail can fall through on a POST with invalid form data and attempt to render without initializing required context variables (UnboundLocalError), and the vote branch redirects even when the form is invalid, hiding errors",
        "ai_activities_reply assumes a user named 'ai_user' and a well-formed updates_json payload; missing users or keys will raise exceptions, and broad exception handling may mask specific failures",
        "The uniqueness check for vote importance relies on Application logic; without database constraints, duplicate importance votes could slip through under concurrent requests",
        "list_activities_text defines week_start but does not use it; filtering logic differs slightly from list_activities"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities",
          "args_raw": [],
          "href_expr": "{% url 'list_activities' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities or register a new activity.",
          "text": "Project activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities_text",
          "args_raw": [],
          "href_expr": "{% url 'list_activities_text' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities in plain text form. Mainly for AI.",
          "text": "Activities (plain text version)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "ai_activities_reply",
          "args_raw": [],
          "href_expr": "{% url 'ai_activities_reply' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a JSON structure written by the AI, which updates the activities.",
          "text": "Post AI updates to activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.ai_activities_reply"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4199,
        "completion_tokens": 3691,
        "total_tokens": 7890,
        "estimated_cost_usd": 0.042158749999999995
      }
    },
    {
      "url_name": "add_credit",
      "callable": "clara_app.credit_views.add_credit",
      "module_repo_path": "clara_app/credit_views.py",
      "short_summary": "This module defines Django views for displaying and manipulating user credit balances. It supports administrators adding credit to accounts and logged-in users transferring credit to others. Transfers are staged in the session and require a confirmation code sent via email before balances are updated, with templates rendered including Clara version context.",
      "proposed_docstring": "Views for managing the C-LARA credit system, providing balance display, admin credit additions, and user-to-user transfers with confirmation. Forms and Django messages are used to collect and validate input, update user profile credit fields, and render templates with configuration such as the current Clara version. Pending transfers are stored in the session and finalized only after the user enters a confirmation code received by email.",
      "key_responsibilities": [
        "Display the logged-in user's current credit balance alongside the Clara version.",
        "Allow admin users to add credit to any user's profile via an AddCreditForm.",
        "Handle initiation of credit transfers by validating recipients and funds, storing pending transfer details in the session, and emailing a confirmation code.",
        "Confirm pending transfers by validating a submitted code, adjusting sender and recipient credits, and providing user feedback via messages."
      ],
      "potential_issues": [
        "Inconsistent handling of the AddCreditForm's 'user' field: in one view it's treated as a User instance, in another as a username string, which may lead to lookup errors.",
        "Some error render paths omit the 'clara_version' context or use a different template path (e.g. 'confirm_transfer.html' vs 'clara_app/confirm_transfer.html'), which could break templates.",
        "No validation against transferring negative amounts or transferring to oneself, and no recheck of available balance at confirmation time.",
        "Email anonymization assumes a minimum length and may fail or produce odd results for short email addresses; sending confirmation uses the sender's email, which might be empty or invalid.",
        "Session-based staging of transfers lacks expiry handling and could be susceptible to concurrent balance changes before confirmation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "add_credit",
          "args_raw": [],
          "href_expr": "{% url 'add_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Add credit to a user's GPT-4 call account",
          "text": "Add credit to user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.add_credit"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "credit_balance",
          "args_raw": [],
          "href_expr": "{% url 'credit_balance' %}",
          "element": "a",
          "attr": "href",
          "title": "C-LARA is free, except that calls to GPT-4 cost money. Show how much you have left on your account.",
          "text": "Credit balance for ChatGPT-4 API calls",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.credit_balance"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "transfer_credit",
          "args_raw": [],
          "href_expr": "{% url 'transfer_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Transfer some of the credit from your GPT-4 call account to another user.",
          "text": "Transfer credit to another user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.transfer_credit"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1266,
        "completion_tokens": 1575,
        "total_tokens": 2841,
        "estimated_cost_usd": 0.0173325
      }
    },
    {
      "url_name": "admin_password_reset",
      "callable": "clara_app.admin_permission_views.admin_password_reset",
      "module_repo_path": "clara_app/admin_permission_views.py",
      "short_summary": "This module defines administrator-facing views for managing users and project permissions in the CLARA app. It allows admins to reset other users' passwords, search for projects and add themselves as co-owners, and select users to update their profile permissions. Access is restricted to logged-in users flagged as admins, and the views coordinate form validation, model updates, and template rendering with appropriate feedback.",
      "proposed_docstring": "Admin-only Django views for managing user accounts, permissions, and project ownership within the CLARA application. It exposes endpoints to manually reset user passwords, search and self-assign co-ownership of projects, and select and update user profile permissions, all gated by login and an is_admin check. The views orchestrate form handling, model updates for projects and permissions, and rendering of templates with configuration details such as the CLARA version, using Django's messaging framework for user feedback.",
      "key_responsibilities": [
        "Restrict access to admin-only operations using login and user_passes_test decorators checking UserProfile.is_admin.",
        "Handle the AdminPasswordResetForm to reset another user's password and provide success/error messaging.",
        "Search and filter CLARAProject records, render a selection formset, and create ProjectPermissions entries to grant the current admin an OWNER role on chosen projects.",
        "Render a workflow to select a user and update their UserProfile permissions via UserPermissionsForm, persisting changes and redirecting on success.",
        "Supply templates with necessary context such as form instances and the current CLARA version retrieved from user configuration."
      ],
      "potential_issues": [
        "The `config` variable and logger are defined but unused, suggesting leftover or incomplete logging/configuration handling.",
        "In `admin_project_ownership`, no check prevents creating duplicate ProjectPermissions; repeated submissions could add redundant owner entries if not constrained at the model level.",
        "If the project selection formset is invalid on POST, `projects_info` is not defined before rendering, which could raise an error in the template context.",
        "The admin checks assume every user has an associated UserProfile; missing profiles would cause attribute errors in the user_passes_test lambdas.",
        "Using `CLARAProject.objects.get` without error handling in `admin_project_ownership` may raise exceptions for invalid project IDs instead of returning a 404."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_user_permissions",
          "args_raw": [],
          "href_expr": "{% url 'manage_user_permissions' %}",
          "element": "a",
          "attr": "href",
          "title": "Manage permissions for funding request reviewer, moderator and admin",
          "text": "Manage permissions",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.manage_user_permissions"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_password_reset",
          "args_raw": [],
          "href_expr": "{% url 'admin_password_reset' %}",
          "element": "a",
          "attr": "href",
          "title": "Manually reset a user's password, in case they cannot use the normal password reset.",
          "text": "Manually reset user's password",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_password_reset"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_project_ownership",
          "args_raw": [],
          "href_expr": "{% url 'admin_project_ownership' %}",
          "element": "a",
          "attr": "href",
          "title": "Give yourself a COOWNER role on a project, if you are an admin and need to access it urgently for some reason.",
          "text": "Make yourself co-owner of a project",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_project_ownership"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1261,
        "completion_tokens": 2665,
        "total_tokens": 3926,
        "estimated_cost_usd": 0.02822625
      }
    },
    {
      "url_name": "admin_project_ownership",
      "callable": "clara_app.admin_permission_views.admin_project_ownership",
      "module_repo_path": "clara_app/admin_permission_views.py",
      "short_summary": "This module defines administrator-facing views for managing users and project permissions in the CLARA app. It allows admins to reset other users' passwords, search for projects and add themselves as co-owners, and select users to update their profile permissions. Access is restricted to logged-in users flagged as admins, and the views coordinate form validation, model updates, and template rendering with appropriate feedback.",
      "proposed_docstring": "Admin-only Django views for managing user accounts, permissions, and project ownership within the CLARA application. It exposes endpoints to manually reset user passwords, search and self-assign co-ownership of projects, and select and update user profile permissions, all gated by login and an is_admin check. The views orchestrate form handling, model updates for projects and permissions, and rendering of templates with configuration details such as the CLARA version, using Django's messaging framework for user feedback.",
      "key_responsibilities": [
        "Restrict access to admin-only operations using login and user_passes_test decorators checking UserProfile.is_admin.",
        "Handle the AdminPasswordResetForm to reset another user's password and provide success/error messaging.",
        "Search and filter CLARAProject records, render a selection formset, and create ProjectPermissions entries to grant the current admin an OWNER role on chosen projects.",
        "Render a workflow to select a user and update their UserProfile permissions via UserPermissionsForm, persisting changes and redirecting on success.",
        "Supply templates with necessary context such as form instances and the current CLARA version retrieved from user configuration."
      ],
      "potential_issues": [
        "The `config` variable and logger are defined but unused, suggesting leftover or incomplete logging/configuration handling.",
        "In `admin_project_ownership`, no check prevents creating duplicate ProjectPermissions; repeated submissions could add redundant owner entries if not constrained at the model level.",
        "If the project selection formset is invalid on POST, `projects_info` is not defined before rendering, which could raise an error in the template context.",
        "The admin checks assume every user has an associated UserProfile; missing profiles would cause attribute errors in the user_passes_test lambdas.",
        "Using `CLARAProject.objects.get` without error handling in `admin_project_ownership` may raise exceptions for invalid project IDs instead of returning a 404."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_user_permissions",
          "args_raw": [],
          "href_expr": "{% url 'manage_user_permissions' %}",
          "element": "a",
          "attr": "href",
          "title": "Manage permissions for funding request reviewer, moderator and admin",
          "text": "Manage permissions",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.manage_user_permissions"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_password_reset",
          "args_raw": [],
          "href_expr": "{% url 'admin_password_reset' %}",
          "element": "a",
          "attr": "href",
          "title": "Manually reset a user's password, in case they cannot use the normal password reset.",
          "text": "Manually reset user's password",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_password_reset"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_project_ownership",
          "args_raw": [],
          "href_expr": "{% url 'admin_project_ownership' %}",
          "element": "a",
          "attr": "href",
          "title": "Give yourself a COOWNER role on a project, if you are an admin and need to access it urgently for some reason.",
          "text": "Make yourself co-owner of a project",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_project_ownership"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1261,
        "completion_tokens": 2665,
        "total_tokens": 3926,
        "estimated_cost_usd": 0.02822625
      }
    },
    {
      "url_name": "aggregated_questionnaire_results",
      "callable": "clara_app.satisfaction_questionnaire_views.aggregated_questionnaire_results",
      "module_repo_path": "clara_app/satisfaction_questionnaire_views.py",
      "short_summary": "This module contains Django view functions for the satisfaction questionnaire workflow. Authenticated users can submit and update their own questionnaires for a project, and view questionnaires. Questionnaire reviewers can list, export to Excel, or delete responses. An aggregation view computes averaged ratings and distributions for reporting templates.",
      "proposed_docstring": "Views for handling satisfaction questionnaires associated with CLARA projects. This module provides endpoints for users to fill in or update their own questionnaire, view a submitted questionnaire, and for reviewers to manage responses, including exporting or deleting them. It also exposes an aggregation view that computes summary statistics and distributions of responses for reporting templates.",
      "key_responsibilities": [
        "Render and process the satisfaction questionnaire form for a given project and the current user, creating or updating their response.",
        "Display a read-only questionnaire response for a specified project/user pair.",
        "Provide a management interface for questionnaire reviewers to list, export all responses to an Excel file, or delete selected submissions.",
        "Aggregate questionnaire data (averages, distributions, recent free-text answers) and render them for reporting."
      ],
      "potential_issues": [
        "The aggregation view has no access control; any visitor could access aggregate results unless protected elsewhere.",
        "show_questionnaire allows any authenticated user to view any user's questionnaire if they know the IDs, which may be a privacy concern.",
        "manage_questionnaires relies on a u.userprofile attribute; if a User lacks a related profile, user_passes_test will raise an error.",
        "Excel export and aggregation over all responses could be memory intensive with a large dataset and lacks pagination or streaming.",
        "Timezone conversion is applied only to the created_at field in exports; other datetime fields may remain timezone-aware if present.",
        "config and logger are initialized but not used in this module."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "aggregated_questionnaire_results",
          "args_raw": [],
          "href_expr": "{% url 'aggregated_questionnaire_results' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for satisfaction questionnaires.",
          "text": "Questionnaire summary (projects)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.aggregated_questionnaire_results"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_questionnaires",
          "args_raw": [],
          "href_expr": "{% url 'manage_questionnaires' %}",
          "element": "a",
          "attr": "href",
          "title": "Review and possibly delete questionnaires",
          "text": "Review questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.manage_questionnaires"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "satisfaction_questionnaire",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'satisfaction_questionnaire' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Answer Satisfaction Questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.satisfaction_questionnaire_views.satisfaction_questionnaire"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1739,
        "completion_tokens": 895,
        "total_tokens": 2634,
        "estimated_cost_usd": 0.01112375
      }
    },
    {
      "url_name": "ai_activities_reply",
      "callable": "clara_app.activity_tracker_views.ai_activities_reply",
      "module_repo_path": "clara_app/activity_tracker_views.py",
      "short_summary": "This module defines Django views for creating, viewing, updating, and listing activities within the application. It supports commenting, registration, status/resolution changes, and weighted voting on activities, and sends email notifications to relevant users when new comments are posted. Admin-only views provide a plain text summary for AI consumption and accept AI-submitted activity updates and votes. Helpers annotate activity querysets with vote scores and status ordering for display.",
      "proposed_docstring": "Views for the activity tracker: handle creation of new activities, display and update of individual activity records with comments, registrations, voting, status and resolution changes, and notification of participants by email. Provides list views for browsing activities, including an admin-only plain text summary intended for AI integration, and accepts AI-generated updates, comments, new activities and votes. Utilities are provided to annotate and order activity querysets for display and to enforce weekly voting uniqueness via get_zoom_meeting_start_date.",
      "key_responsibilities": [
        "Create new activities via ActivityForm and redirect to detail views",
        "Render activity detail pages with commenting, registration, status/resolution updates, and vote handling tied to weekly periods",
        "Notify activity creators, voters, and commenters of new comments via email templating and environment-aware sending",
        "List activities with search/filter options and annotate them with vote scores and status ordering for display",
        "Provide an admin-only plain text activity summary with instructions/examples for AI updates, and process AI-submitted comments, new activities, and votes"
      ],
      "potential_issues": [
        "create_activity does not render the form with errors on invalid POST and may return None, leading to a server error",
        "activity_detail can fall through on a POST with invalid form data and attempt to render without initializing required context variables (UnboundLocalError), and the vote branch redirects even when the form is invalid, hiding errors",
        "ai_activities_reply assumes a user named 'ai_user' and a well-formed updates_json payload; missing users or keys will raise exceptions, and broad exception handling may mask specific failures",
        "The uniqueness check for vote importance relies on Application logic; without database constraints, duplicate importance votes could slip through under concurrent requests",
        "list_activities_text defines week_start but does not use it; filtering logic differs slightly from list_activities"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities",
          "args_raw": [],
          "href_expr": "{% url 'list_activities' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities or register a new activity.",
          "text": "Project activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities_text",
          "args_raw": [],
          "href_expr": "{% url 'list_activities_text' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities in plain text form. Mainly for AI.",
          "text": "Activities (plain text version)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "ai_activities_reply",
          "args_raw": [],
          "href_expr": "{% url 'ai_activities_reply' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a JSON structure written by the AI, which updates the activities.",
          "text": "Post AI updates to activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.ai_activities_reply"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4199,
        "completion_tokens": 3691,
        "total_tokens": 7890,
        "estimated_cost_usd": 0.042158749999999995
      }
    },
    {
      "url_name": "assign_coordinator_to_community",
      "callable": "clara_app.community_views.assign_coordinator_to_community",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "assign_member_to_community",
      "callable": "clara_app.community_views.assign_member_to_community",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "build_content_zip",
      "callable": "clara_app.content_views.build_content_zip",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "bulk_audio_export_complete",
      "callable": "clara_app.export_zipfile_views.bulk_audio_export_complete",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_audio_export_monitor",
      "callable": "clara_app.export_zipfile_views.bulk_audio_export_monitor",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_audio_export_start",
      "callable": "clara_app.export_zipfile_views.start_bulk_audio_export",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_audio_export_status",
      "callable": "clara_app.export_zipfile_views.bulk_audio_export_status",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_source_exports_complete",
      "callable": "clara_app.export_zipfile_views.bulk_source_exports_complete",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_source_exports_monitor",
      "callable": "clara_app.export_zipfile_views.bulk_source_exports_monitor",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bulk_source_exports_status",
      "callable": "clara_app.export_zipfile_views.bulk_source_exports_status",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "bundle_list",
      "callable": "clara_app.annotation_prompts_views.bundle_list",
      "module_repo_path": "clara_app/annotation_prompts_views.py",
      "short_summary": "This module defines Django views for managing annotation prompt templates/examples and localisation translation bundles. The edit_prompt view lets language masters load or save prompt templates or example sets for various annotation types, dynamically constructing formsets and deferring persistence to a PromptTemplateRepository. The bundle_list and edit_bundle views show translation progress per bundle and allow authorised users to edit translations.",
      "proposed_docstring": "Django views handling editing of annotation prompt templates/examples and localisation bundles. Provides interfaces for language masters to select, load and save prompt templates and examples via formsets backed by PromptTemplateRepository, with right-to-left support and user-specific config. Also includes list/edit views for localisation bundles and translations, enforcing permissions and rendering appropriate templates with success/error messaging.",
      "key_responsibilities": [
        "Expose edit_prompt view to allow language masters to load and save prompt templates or annotation examples for a given language, annotation type and operation using dynamic formsets.",
        "Invoke PromptTemplateRepository to retrieve default or language-specific templates/examples and handle TemplateError conditions with user feedback.",
        "Render and process list/edit pages for localisation bundles, aggregating translation counts per language and persisting BundleTranslation updates.",
        "Enforce access control for language masters and translators, and use Django messages to report success or errors to the user."
      ],
      "potential_issues": [
        "edit_bundle returns HttpResponseForbidden without importing it, which will raise a NameError.",
        "In the save branch of edit_prompt for string pair formsets, it attempts to access new_prompts[-1][2] even though only two elements are collected, likely causing an IndexError.",
        "bundle_list currently uses print statements for debugging instead of the configured logger.",
        "Language column selection in bundle_list ignores existing translations (commented-out logic), potentially hiding languages with data if the user is not a master."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bundle_list",
          "args_raw": [],
          "href_expr": "{% url 'bundle_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all localisation bundles",
          "text": "List all localisation bundles",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.bundle_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_prompt",
          "args_raw": [],
          "href_expr": "{% url 'edit_prompt' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit the GPT-4 prompt templates and examples used to create text annotations for languages where you are a language master.",
          "text": "Edit annotation prompts",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.edit_prompt"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2764,
        "completion_tokens": 2441,
        "total_tokens": 5205,
        "estimated_cost_usd": 0.027865
      }
    },
    {
      "url_name": "clara_home_page",
      "callable": "clara_app.home_views.clara_home_page",
      "module_repo_path": "clara_app/home_views.py",
      "short_summary": "This module defines the home and landing page views for the C-LARA application. It routes users to community-specific pages or a general home based on their memberships and authentication status. It renders the main home page with recent contents and activities filtered by a selectable time period, and orders activities by status for display.",
      "proposed_docstring": "Views for directing users to appropriate C-LARA landing pages, determining whether to show a generic home, a community-specific home, or a selection screen based on their memberships. Provides the main home page rendering recent content and activities filtered by a configurable time period, with support for a unified search form. Includes helper logic to annotate and order activities for display and simple redirects for login and default home access.",
      "key_responsibilities": [
        "Redirect unauthenticated or generic home requests to appropriate login or home URLs.",
        "Determine and route users to community homes, the generic C-LARA home, or a selection page based on community memberships.",
        "Render the main C-LARA home page with recent content and activities filtered by a time period from a search form.",
        "Annotate and order activity querysets by status and creation date for presentation."
      ],
      "potential_issues": [
        "The general home/home_page views are not decorated with login_required, so anonymous users may hit them and produce unexpected redirects or behavior.",
        "Community membership checks in home_page perform separate queries (exists/count/first), which may be inefficient; using count could produce extra database hits.",
        "The get_config() call assigns to config but is unused in this module, indicating possible leftover or missing configuration usage.",
        "The time_period conversion in clara_home_page assumes form validation ensures an integer; malformed GET parameters could still cause errors if validation is bypassed."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "home_page",
          "args_raw": [],
          "href_expr": "{% url 'home_page' %}",
          "element": "a",
          "attr": "href",
          "title": "Home page: show recent activities and content",
          "text": null,
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.home_views.home_page"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 808,
        "completion_tokens": 955,
        "total_tokens": 1763,
        "estimated_cost_usd": 0.01056
      }
    },
    {
      "url_name": "clear_content_password",
      "callable": "clara_app.content_password_views.clear_content_password",
      "module_repo_path": "clara_app/content_password_views.py",
      "short_summary": "This module implements Django views to list and update passwords on content tied to projects the current user owns. It renders a management page showing protected content and per-item forms, and provides POST handlers to set/change or clear a content password. Access is enforced via an owner assertion and feedback is communicated through Django's messages framework.",
      "proposed_docstring": "Views for managing password protection on Content objects owned by a user. Provides an owner check helper and three entry points: a listing page of protected content with per-row update forms, and POST handlers to set/change or clear a password and hint. Interacts with the Content and CLARAProject models, a ContentPasswordUpdateForm, and uses Django messages and templates to render feedback and redirect to the management page.",
      "key_responsibilities": [
        "Filter and render password-protected Content items for projects owned by the requesting user.",
        "Instantiate and pass ContentPasswordUpdateForm instances to the management template for each item.",
        "Handle POST requests to clear an existing content password after asserting ownership.",
        "Handle POST requests to set or change a content password and hint, treating empty input as a clear operation and persisting changes with appropriate success messages."
      ],
      "potential_issues": [
        "Protected content filtering excludes only NULL password hashes; records with empty strings may still appear unexpectedly.",
        "The type hint on `_assert_owner` suggests `CLARAProjectInternal` but is passed a `Content.project`, which could be confusing if types diverge.",
        "Unused import of `timezone` and commented out rate limiting hints at missing brute-force protection or incomplete cleanup.",
        "Only project owners are allowed; if other roles should manage passwords this check would need adjustment."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_content_passwords",
          "args_raw": [],
          "href_expr": "{% url 'manage_content_passwords' %}",
          "element": "a",
          "attr": "href",
          "title": "Change or remove passwords on content where you have set them.",
          "text": "Change/remove content passwords",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_password_views.manage_content_passwords"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1000,
        "completion_tokens": 1452,
        "total_tokens": 2452,
        "estimated_cost_usd": 0.01577
      }
    },
    {
      "url_name": "clone_project",
      "callable": "clara_app.create_project_views.clone_project",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "coherent_images_v2_monitor",
      "callable": "clara_app.images_v2_views.coherent_images_v2_monitor",
      "module_repo_path": "clara_app/images_v2_views.py",
      "short_summary": "Provides the edit_images_v2 view for configuring and managing coherent images for a CLARA project. Handles saving parameters and text content, deleting assets, downloading images, and kicking off asynchronous generation tasks for style, elements, and pages via django_q. Supplies monitoring/status endpoints and helper functions that interact with CLARAProjectInternal to generate content, store costs, and report task progress or errors. Broad exception handling flags inconsistencies and surfaces messages to the user.",
      "proposed_docstring": "Django views and background task helpers for managing coherent image set v2 within a CLARA project. This module renders and processes the main editing interface, allowing users to view and edit page texts and advice, adjust generation parameters, delete or download assets, and trigger AI-driven generation of style descriptions, element names, element/page descriptions, and images. It wires async tasks through django_q with status/monitor endpoints, relays cost and task updates, and interacts heavily with CLARAProjectInternal to persist changes and enforce content policy checks.",
      "key_responsibilities": [
        "Render the edit_images_v2 page and populate forms/formsets with project parameters, texts, advice, and existing style/element/page images.",
        "Process POST actions to save parameters, background/style/element/page advice and texts, delete images or elements, create overview documents, and download image archives.",
        "Initiate and monitor asynchronous AI-driven tasks (style description/image, element names/descriptions/images, page descriptions/images, adding elements) using django_q, with callback/report IDs and status JSON/monitor views.",
        "Helper functions to drive CLARAProjectInternal generation methods, record API costs, and post task updates while checking for content policy violations."
      ],
      "potential_issues": [
        "actions_requiring_openai includes 'generate_variant_images', but the edit_images_v2 view does not handle this action; the create_variant_images helper may never be invoked.",
        "Building page_data assumes indexed_page_data is non-empty (uses max(...)) and only adds entries when a page exists in indexed_page_data, contrary to the comment about creating entries for pages with no image.",
        "coherent_images_v2_status assigns to a local variable named messages, shadowing django.contrib.messages and may be confusing; it also relies on 'error'/'finished' being present in the returned list of messages.",
        "Exception handling is very broad and sometimes simply flags the interface as inconsistent, which may mask underlying bugs or leave the UI without forms.",
        "The duplicate import of get_element_names_params_from_project_params is redundant and could indicate copy-paste issues."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images_v2",
          "args_raw": [
            "project.id",
            "'none'"
          ],
          "href_expr": "{% url 'edit_images_v2' project.id 'none' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v2_views.edit_images_v2"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 7908,
        "completion_tokens": 2401,
        "total_tokens": 10309,
        "estimated_cost_usd": 0.033895
      }
    },
    {
      "url_name": "coherent_images_v2_status",
      "callable": "clara_app.images_v2_views.coherent_images_v2_status",
      "module_repo_path": "clara_app/images_v2_views.py",
      "short_summary": "Provides the edit_images_v2 view for configuring and managing coherent images for a CLARA project. Handles saving parameters and text content, deleting assets, downloading images, and kicking off asynchronous generation tasks for style, elements, and pages via django_q. Supplies monitoring/status endpoints and helper functions that interact with CLARAProjectInternal to generate content, store costs, and report task progress or errors. Broad exception handling flags inconsistencies and surfaces messages to the user.",
      "proposed_docstring": "Django views and background task helpers for managing coherent image set v2 within a CLARA project. This module renders and processes the main editing interface, allowing users to view and edit page texts and advice, adjust generation parameters, delete or download assets, and trigger AI-driven generation of style descriptions, element names, element/page descriptions, and images. It wires async tasks through django_q with status/monitor endpoints, relays cost and task updates, and interacts heavily with CLARAProjectInternal to persist changes and enforce content policy checks.",
      "key_responsibilities": [
        "Render the edit_images_v2 page and populate forms/formsets with project parameters, texts, advice, and existing style/element/page images.",
        "Process POST actions to save parameters, background/style/element/page advice and texts, delete images or elements, create overview documents, and download image archives.",
        "Initiate and monitor asynchronous AI-driven tasks (style description/image, element names/descriptions/images, page descriptions/images, adding elements) using django_q, with callback/report IDs and status JSON/monitor views.",
        "Helper functions to drive CLARAProjectInternal generation methods, record API costs, and post task updates while checking for content policy violations."
      ],
      "potential_issues": [
        "actions_requiring_openai includes 'generate_variant_images', but the edit_images_v2 view does not handle this action; the create_variant_images helper may never be invoked.",
        "Building page_data assumes indexed_page_data is non-empty (uses max(...)) and only adds entries when a page exists in indexed_page_data, contrary to the comment about creating entries for pages with no image.",
        "coherent_images_v2_status assigns to a local variable named messages, shadowing django.contrib.messages and may be confusing; it also relies on 'error'/'finished' being present in the returned list of messages.",
        "Exception handling is very broad and sometimes simply flags the interface as inconsistent, which may mask underlying bugs or leave the UI without forms.",
        "The duplicate import of get_element_names_params_from_project_params is redundant and could indicate copy-paste issues."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images_v2",
          "args_raw": [
            "project.id",
            "'none'"
          ],
          "href_expr": "{% url 'edit_images_v2' project.id 'none' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v2_views.edit_images_v2"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 7908,
        "completion_tokens": 2401,
        "total_tokens": 10309,
        "estimated_cost_usd": 0.033895
      }
    },
    {
      "url_name": "community_home",
      "callable": "clara_app.community_views.community_home",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "community_organiser_review_images",
      "callable": "clara_app.community_reviewing_views.community_organiser_review_images",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "community_review_images",
      "callable": "clara_app.community_reviewing_views.community_review_images",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "community_review_images_external",
      "callable": "clara_app.community_reviewing_views.community_review_images_external",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "community_review_images_for_page",
      "callable": "clara_app.community_reviewing_views.community_review_images_for_page",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "compare_versions",
      "callable": "clara_app.comparing_views.compare_versions",
      "module_repo_path": "clara_app/comparing_views.py",
      "short_summary": "This module defines Django views to support comparing file versions within a CLARA project. It exposes a JSON API to retrieve metadata for a specific version and a form-based interface that lets logged-in users select files, compute diffs, and render the results. The views rely on CLARAProjectInternal for metadata and diffing and dynamically adjust form choices based on available metadata.",
      "proposed_docstring": "View handlers for comparing different versions of CLARA project texts and exposing version metadata. This module provides a JSON endpoint to fetch file metadata for a given project version and a form-driven page to select two files and compute a diff between them using CLARAProjectInternal. Form choices are populated dynamically from project metadata, diff markup is converted to HTML, and errors are reported through Django's messages framework.",
      "key_responsibilities": [
        "Fetch and return project file metadata for a specified version as JSON to authenticated users with project roles.",
        "Render and process a form for selecting two files and a version to compute a textual diff via CLARAProjectInternal.",
        "Populate form choices dynamically from project metadata and render diff results with basic markup-to-HTML conversion.",
        "Handle internalisation errors by surfacing messages and re-rendering the selection form."
      ],
      "potential_issues": [
        "Form validation is bypassed and request.POST is accessed directly; malformed or missing POST data may cause errors or bypass expected validation.",
        "Dynamic population of form choices could be why form validation fails; choices are set after instantiation and may not match posted values.",
        "The template context on POST does not include clara_version, which may be expected by the template and could cause rendering issues.",
        "Unused configuration and logger imports suggest missing logging; errors in diff conversion are not logged and could be hard to trace.",
        "No handling if requested version or files are absent from metadata; CLARAProjectInternal.diff_editions_of_text_version may raise or fail silently."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "compare_versions",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'compare_versions' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Compare Text Versions",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.comparing_views.compare_versions"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1146,
        "completion_tokens": 1116,
        "total_tokens": 2262,
        "estimated_cost_usd": 0.0125925
      }
    },
    {
      "url_name": "confirm_funding_approvals",
      "callable": "clara_app.funding_requests_views.confirm_funding_approvals",
      "module_repo_path": "clara_app/funding_requests_views.py",
      "short_summary": "This module defines Django views for creating and processing funding requests within the C-LARA application. Authenticated users can submit new requests, while reviewers can filter and approve them, triggering an email confirmation step. Upon confirmation, the code updates request statuses, transfers credits between user profiles, and notifies requesters via email.",
      "proposed_docstring": "Views to handle the C-LARA funding workflow: allowing authenticated users to submit funding requests, enabling designated reviewers to search, review and approve requests, and confirming approvals with a emailed confirmation code before transferring credits. Reviewers can filter requests, allocate funds via a formset, and the module orchestrates email notifications and session storage of pending transfers, updating FundingRequest records and user balances upon confirmation.",
      "key_responsibilities": [
        "Render and process the funding request submission form for logged-in users",
        "Allow reviewers to filter funding requests and allocate credits via an approval formset",
        "Send confirmation emails to reviewers and handle confirmation code input to finalize approvals",
        "Update FundingRequest records, adjust user profile credit balances, and notify requesters of approvals"
      ],
      "potential_issues": [
        "Credit balance checks and transfers are not wrapped in a transaction and may be subject to race conditions or mid-process balance changes.",
        "Approval processing relies on form POST data without re-querying or validating the current status of each FundingRequest, which could allow tampering or approving already-processed requests.",
        "Credit assignments are cast to int, potentially dropping cents and causing rounding errors when dealing with Decimal fields.",
        "Initial formset status uses display labels from choices; if the ApproveFundingRequestFormSet expects raw status values, there may be mismatches between displayed and processed statuses.",
        "Email anonymization logic assumes email length and may produce odd results for short addresses."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "funding_request",
          "args_raw": [],
          "href_expr": "{% url 'funding_request' %}",
          "element": "a",
          "attr": "href",
          "title": "Submit a request to get a small amount of OpenAI credit",
          "text": "Funding request",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.funding_request"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "review_funding_requests",
          "args_raw": [],
          "href_expr": "{% url 'review_funding_requests' %}",
          "element": "a",
          "attr": "href",
          "title": "Review funding requests",
          "text": "Review funding requests",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.review_funding_requests"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1975,
        "completion_tokens": 1411,
        "total_tokens": 3386,
        "estimated_cost_usd": 0.01657875
      }
    },
    {
      "url_name": "confirm_transfer",
      "callable": "clara_app.credit_views.confirm_transfer",
      "module_repo_path": "clara_app/credit_views.py",
      "short_summary": "This module defines Django views for displaying and manipulating user credit balances. It supports administrators adding credit to accounts and logged-in users transferring credit to others. Transfers are staged in the session and require a confirmation code sent via email before balances are updated, with templates rendered including Clara version context.",
      "proposed_docstring": "Views for managing the C-LARA credit system, providing balance display, admin credit additions, and user-to-user transfers with confirmation. Forms and Django messages are used to collect and validate input, update user profile credit fields, and render templates with configuration such as the current Clara version. Pending transfers are stored in the session and finalized only after the user enters a confirmation code received by email.",
      "key_responsibilities": [
        "Display the logged-in user's current credit balance alongside the Clara version.",
        "Allow admin users to add credit to any user's profile via an AddCreditForm.",
        "Handle initiation of credit transfers by validating recipients and funds, storing pending transfer details in the session, and emailing a confirmation code.",
        "Confirm pending transfers by validating a submitted code, adjusting sender and recipient credits, and providing user feedback via messages."
      ],
      "potential_issues": [
        "Inconsistent handling of the AddCreditForm's 'user' field: in one view it's treated as a User instance, in another as a username string, which may lead to lookup errors.",
        "Some error render paths omit the 'clara_version' context or use a different template path (e.g. 'confirm_transfer.html' vs 'clara_app/confirm_transfer.html'), which could break templates.",
        "No validation against transferring negative amounts or transferring to oneself, and no recheck of available balance at confirmation time.",
        "Email anonymization assumes a minimum length and may fail or produce odd results for short email addresses; sending confirmation uses the sender's email, which might be empty or invalid.",
        "Session-based staging of transfers lacks expiry handling and could be susceptible to concurrent balance changes before confirmation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "add_credit",
          "args_raw": [],
          "href_expr": "{% url 'add_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Add credit to a user's GPT-4 call account",
          "text": "Add credit to user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.add_credit"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "credit_balance",
          "args_raw": [],
          "href_expr": "{% url 'credit_balance' %}",
          "element": "a",
          "attr": "href",
          "title": "C-LARA is free, except that calls to GPT-4 cost money. Show how much you have left on your account.",
          "text": "Credit balance for ChatGPT-4 API calls",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.credit_balance"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "transfer_credit",
          "args_raw": [],
          "href_expr": "{% url 'transfer_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Transfer some of the credit from your GPT-4 call account to another user.",
          "text": "Transfer credit to another user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.transfer_credit"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1266,
        "completion_tokens": 1575,
        "total_tokens": 2841,
        "estimated_cost_usd": 0.0173325
      }
    },
    {
      "url_name": "content_detail",
      "callable": "clara_app.content_views.content_detail",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "content_list",
      "callable": "clara_app.content_views.content_list",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "content_success",
      "callable": "clara_app.content_views.content_success",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "create_activity",
      "callable": "clara_app.activity_tracker_views.create_activity",
      "module_repo_path": "clara_app/activity_tracker_views.py",
      "short_summary": "This module defines Django views for creating, viewing, updating, and listing activities within the application. It supports commenting, registration, status/resolution changes, and weighted voting on activities, and sends email notifications to relevant users when new comments are posted. Admin-only views provide a plain text summary for AI consumption and accept AI-submitted activity updates and votes. Helpers annotate activity querysets with vote scores and status ordering for display.",
      "proposed_docstring": "Views for the activity tracker: handle creation of new activities, display and update of individual activity records with comments, registrations, voting, status and resolution changes, and notification of participants by email. Provides list views for browsing activities, including an admin-only plain text summary intended for AI integration, and accepts AI-generated updates, comments, new activities and votes. Utilities are provided to annotate and order activity querysets for display and to enforce weekly voting uniqueness via get_zoom_meeting_start_date.",
      "key_responsibilities": [
        "Create new activities via ActivityForm and redirect to detail views",
        "Render activity detail pages with commenting, registration, status/resolution updates, and vote handling tied to weekly periods",
        "Notify activity creators, voters, and commenters of new comments via email templating and environment-aware sending",
        "List activities with search/filter options and annotate them with vote scores and status ordering for display",
        "Provide an admin-only plain text activity summary with instructions/examples for AI updates, and process AI-submitted comments, new activities, and votes"
      ],
      "potential_issues": [
        "create_activity does not render the form with errors on invalid POST and may return None, leading to a server error",
        "activity_detail can fall through on a POST with invalid form data and attempt to render without initializing required context variables (UnboundLocalError), and the vote branch redirects even when the form is invalid, hiding errors",
        "ai_activities_reply assumes a user named 'ai_user' and a well-formed updates_json payload; missing users or keys will raise exceptions, and broad exception handling may mask specific failures",
        "The uniqueness check for vote importance relies on Application logic; without database constraints, duplicate importance votes could slip through under concurrent requests",
        "list_activities_text defines week_start but does not use it; filtering logic differs slightly from list_activities"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities",
          "args_raw": [],
          "href_expr": "{% url 'list_activities' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities or register a new activity.",
          "text": "Project activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities_text",
          "args_raw": [],
          "href_expr": "{% url 'list_activities_text' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities in plain text form. Mainly for AI.",
          "text": "Activities (plain text version)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "ai_activities_reply",
          "args_raw": [],
          "href_expr": "{% url 'ai_activities_reply' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a JSON structure written by the AI, which updates the activities.",
          "text": "Post AI updates to activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.ai_activities_reply"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4199,
        "completion_tokens": 3691,
        "total_tokens": 7890,
        "estimated_cost_usd": 0.042158749999999995
      }
    },
    {
      "url_name": "create_cefr_level",
      "callable": "clara_app.annotation_views.create_cefr_level",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_community",
      "callable": "clara_app.community_views.create_community",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "create_dall_e_3_image_monitor",
      "callable": "clara_app.images_v1_views.create_dall_e_3_image_monitor",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "create_dall_e_3_image_status",
      "callable": "clara_app.images_v1_views.create_dall_e_3_image_status",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "create_glossed_text",
      "callable": "clara_app.annotation_views.create_glossed_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_glossed_text_from_lemma",
      "callable": "clara_app.annotation_views.create_glossed_text_from_lemma",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_lemma_and_gloss_tagged_text",
      "callable": "clara_app.annotation_views.create_lemma_and_gloss_tagged_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_lemma_tagged_text",
      "callable": "clara_app.annotation_views.create_lemma_tagged_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_mwe_tagged_text",
      "callable": "clara_app.annotation_views.create_mwe_tagged_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_phonetic_text",
      "callable": "clara_app.annotation_views.create_phonetic_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_pinyin_tagged_text",
      "callable": "clara_app.annotation_views.create_pinyin_tagged_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_plain_text",
      "callable": "clara_app.annotation_views.create_plain_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_project",
      "callable": "clara_app.create_project_views.create_project",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "create_segmented_text",
      "callable": "clara_app.annotation_views.create_segmented_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_segmented_title",
      "callable": "clara_app.annotation_views.create_segmented_title",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_summary",
      "callable": "clara_app.annotation_views.create_summary",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_title",
      "callable": "clara_app.annotation_views.create_title",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "create_translated_text",
      "callable": "clara_app.annotation_views.create_translated_text",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "credit_balance",
      "callable": "clara_app.credit_views.credit_balance",
      "module_repo_path": "clara_app/credit_views.py",
      "short_summary": "This module defines Django views for displaying and manipulating user credit balances. It supports administrators adding credit to accounts and logged-in users transferring credit to others. Transfers are staged in the session and require a confirmation code sent via email before balances are updated, with templates rendered including Clara version context.",
      "proposed_docstring": "Views for managing the C-LARA credit system, providing balance display, admin credit additions, and user-to-user transfers with confirmation. Forms and Django messages are used to collect and validate input, update user profile credit fields, and render templates with configuration such as the current Clara version. Pending transfers are stored in the session and finalized only after the user enters a confirmation code received by email.",
      "key_responsibilities": [
        "Display the logged-in user's current credit balance alongside the Clara version.",
        "Allow admin users to add credit to any user's profile via an AddCreditForm.",
        "Handle initiation of credit transfers by validating recipients and funds, storing pending transfer details in the session, and emailing a confirmation code.",
        "Confirm pending transfers by validating a submitted code, adjusting sender and recipient credits, and providing user feedback via messages."
      ],
      "potential_issues": [
        "Inconsistent handling of the AddCreditForm's 'user' field: in one view it's treated as a User instance, in another as a username string, which may lead to lookup errors.",
        "Some error render paths omit the 'clara_version' context or use a different template path (e.g. 'confirm_transfer.html' vs 'clara_app/confirm_transfer.html'), which could break templates.",
        "No validation against transferring negative amounts or transferring to oneself, and no recheck of available balance at confirmation time.",
        "Email anonymization assumes a minimum length and may fail or produce odd results for short email addresses; sending confirmation uses the sender's email, which might be empty or invalid.",
        "Session-based staging of transfers lacks expiry handling and could be susceptible to concurrent balance changes before confirmation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "add_credit",
          "args_raw": [],
          "href_expr": "{% url 'add_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Add credit to a user's GPT-4 call account",
          "text": "Add credit to user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.add_credit"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "credit_balance",
          "args_raw": [],
          "href_expr": "{% url 'credit_balance' %}",
          "element": "a",
          "attr": "href",
          "title": "C-LARA is free, except that calls to GPT-4 cost money. Show how much you have left on your account.",
          "text": "Credit balance for ChatGPT-4 API calls",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.credit_balance"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "transfer_credit",
          "args_raw": [],
          "href_expr": "{% url 'transfer_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Transfer some of the credit from your GPT-4 call account to another user.",
          "text": "Transfer credit to another user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.transfer_credit"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1266,
        "completion_tokens": 1575,
        "total_tokens": 2841,
        "estimated_cost_usd": 0.0173325
      }
    },
    {
      "url_name": "delete_all_data",
      "callable": "clara_app.text_questionnaire_views.tq_delete_all_data",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "delete_archive_image",
      "callable": "clara_app.images_v1_views.delete_archive_image",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "delete_community_menu",
      "callable": "clara_app.community_views.delete_community_menu",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "delete_old_task_updates",
      "callable": "clara_app.task_update_views.delete_old_task_updates",
      "module_repo_path": "clara_app/task_update_views.py",
      "short_summary": "This module defines Django views to show a user's recent task updates and to delete outdated update records. It leverages user-specific configuration for display and uses standard login and admin checks for access control, rendering a template with the relevant context or redirecting after cleanup.",
      "proposed_docstring": "Views for displaying recent task update messages to logged-in users and providing an administrative cleanup action. The module filters TaskUpdate records within a recent time window for the current user, renders them with configured CLARA version information, and allows admins to purge updates older than a set threshold with user feedback.",
      "key_responsibilities": [
        "Retrieve and display TaskUpdate entries from the past hour for the authenticated user, ordered by timestamp.",
        "Fetch user configuration to include CLARA version information in the task updates view.",
        "Provide an admin-only endpoint to delete task updates older than 30 days and notify via Django messages.",
        "Enforce authentication and administrative checks on the exposed views."
      ],
      "potential_issues": [
        "TaskUpdate is filtered on user_id using the username; if the model expects a numeric user ID, this may not match and return no updates.",
        "get_user_config is assumed to return a dict with a 'clara_version' key; missing config could raise a KeyError.",
        "delete_old_task_updates deletes all old updates across all users without confirmation or per-user scoping, which might be unexpected.",
        "The imported config and logger are currently unused, and there is no error handling around database operations."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_old_task_updates",
          "args_raw": [],
          "href_expr": "{% url 'delete_old_task_updates' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all task updates more than 30 days old.",
          "text": "Delete old task updates",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.task_update_views.delete_old_task_updates"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "view_task_updates",
          "args_raw": [],
          "href_expr": "{% url 'view_task_updates' %}",
          "element": "a",
          "attr": "href",
          "title": "Show trace output from C-LARA tasks produced during the last hour.",
          "text": "Recent task updates",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.task_update_views.view_task_updates"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 492,
        "completion_tokens": 777,
        "total_tokens": 1269,
        "estimated_cost_usd": 0.008385
      }
    },
    {
      "url_name": "delete_project",
      "callable": "clara_app.manipulate_project_views.delete_project",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "delete_tts_data",
      "callable": "clara_app.delete_tts_views.delete_tts_data",
      "module_repo_path": "clara_app/delete_tts_views.py",
      "short_summary": "Exposes views for administrators to delete cached TTS data for a selected language using an asynchronous background task. It sets up callback tracking for task updates, provides a monitor page and JSON polling endpoint, and reports completion status back to the user via Django messages and templates.",
      "proposed_docstring": "This module provides admin-only Django views to initiate, monitor, and report completion of asynchronous deletion of cached text-to-speech data for a given language. It wraps an AudioAnnotator helper to perform the deletion and uses django_q to run the task in the background, wiring up callback/report IDs so progress can be polled via a JSON status endpoint. The views render forms for selecting a language, redirect to a monitor page during execution, and surface success/error messages upon completion.",
      "key_responsibilities": [
        "Handle form submission to select a language and trigger asynchronous deletion of TTS data via django_q tasks.",
        "Create and pass callback/report identifiers to collect task progress updates and redirect users to a monitoring view.",
        "Expose a JSON endpoint that returns task update messages and a coarse status for client-side polling.",
        "Render monitoring and completion views, including user feedback through Django's messaging framework."
      ],
      "potential_issues": [
        "The variable name `messages` in `delete_tts_data_status` shadows the imported Django messages API, which could be confusing and may lead to mistakes if modified.",
        "Status detection in `delete_tts_data_status` checks for string membership in the messages list; if updates are structured differently, status may remain 'unknown'.",
        "There is limited error handling around the asynchronous task invocation; failures in `async_task` or `delete_tts_data_for_language` are not caught or surfaced beyond callback messages.",
        "The monitor view itself does not fetch or display status; it relies on client-side polling hitting the status endpoint, which must be implemented in templates/JavaScript."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_tts_data",
          "args_raw": [],
          "href_expr": "{% url 'delete_tts_data' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all cached TTS data for a given language.",
          "text": "Delete TTS data",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.delete_tts_views.delete_tts_data"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1110,
        "completion_tokens": 985,
        "total_tokens": 2095,
        "estimated_cost_usd": 0.0112375
      }
    },
    {
      "url_name": "delete_tts_data_complete",
      "callable": "clara_app.delete_tts_views.delete_tts_data_complete",
      "module_repo_path": "clara_app/delete_tts_views.py",
      "short_summary": "Exposes views for administrators to delete cached TTS data for a selected language using an asynchronous background task. It sets up callback tracking for task updates, provides a monitor page and JSON polling endpoint, and reports completion status back to the user via Django messages and templates.",
      "proposed_docstring": "This module provides admin-only Django views to initiate, monitor, and report completion of asynchronous deletion of cached text-to-speech data for a given language. It wraps an AudioAnnotator helper to perform the deletion and uses django_q to run the task in the background, wiring up callback/report IDs so progress can be polled via a JSON status endpoint. The views render forms for selecting a language, redirect to a monitor page during execution, and surface success/error messages upon completion.",
      "key_responsibilities": [
        "Handle form submission to select a language and trigger asynchronous deletion of TTS data via django_q tasks.",
        "Create and pass callback/report identifiers to collect task progress updates and redirect users to a monitoring view.",
        "Expose a JSON endpoint that returns task update messages and a coarse status for client-side polling.",
        "Render monitoring and completion views, including user feedback through Django's messaging framework."
      ],
      "potential_issues": [
        "The variable name `messages` in `delete_tts_data_status` shadows the imported Django messages API, which could be confusing and may lead to mistakes if modified.",
        "Status detection in `delete_tts_data_status` checks for string membership in the messages list; if updates are structured differently, status may remain 'unknown'.",
        "There is limited error handling around the asynchronous task invocation; failures in `async_task` or `delete_tts_data_for_language` are not caught or surfaced beyond callback messages.",
        "The monitor view itself does not fetch or display status; it relies on client-side polling hitting the status endpoint, which must be implemented in templates/JavaScript."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_tts_data",
          "args_raw": [],
          "href_expr": "{% url 'delete_tts_data' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all cached TTS data for a given language.",
          "text": "Delete TTS data",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.delete_tts_views.delete_tts_data"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1110,
        "completion_tokens": 985,
        "total_tokens": 2095,
        "estimated_cost_usd": 0.0112375
      }
    },
    {
      "url_name": "delete_tts_data_monitor",
      "callable": "clara_app.delete_tts_views.delete_tts_data_monitor",
      "module_repo_path": "clara_app/delete_tts_views.py",
      "short_summary": "Exposes views for administrators to delete cached TTS data for a selected language using an asynchronous background task. It sets up callback tracking for task updates, provides a monitor page and JSON polling endpoint, and reports completion status back to the user via Django messages and templates.",
      "proposed_docstring": "This module provides admin-only Django views to initiate, monitor, and report completion of asynchronous deletion of cached text-to-speech data for a given language. It wraps an AudioAnnotator helper to perform the deletion and uses django_q to run the task in the background, wiring up callback/report IDs so progress can be polled via a JSON status endpoint. The views render forms for selecting a language, redirect to a monitor page during execution, and surface success/error messages upon completion.",
      "key_responsibilities": [
        "Handle form submission to select a language and trigger asynchronous deletion of TTS data via django_q tasks.",
        "Create and pass callback/report identifiers to collect task progress updates and redirect users to a monitoring view.",
        "Expose a JSON endpoint that returns task update messages and a coarse status for client-side polling.",
        "Render monitoring and completion views, including user feedback through Django's messaging framework."
      ],
      "potential_issues": [
        "The variable name `messages` in `delete_tts_data_status` shadows the imported Django messages API, which could be confusing and may lead to mistakes if modified.",
        "Status detection in `delete_tts_data_status` checks for string membership in the messages list; if updates are structured differently, status may remain 'unknown'.",
        "There is limited error handling around the asynchronous task invocation; failures in `async_task` or `delete_tts_data_for_language` are not caught or surfaced beyond callback messages.",
        "The monitor view itself does not fetch or display status; it relies on client-side polling hitting the status endpoint, which must be implemented in templates/JavaScript."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_tts_data",
          "args_raw": [],
          "href_expr": "{% url 'delete_tts_data' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all cached TTS data for a given language.",
          "text": "Delete TTS data",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.delete_tts_views.delete_tts_data"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1110,
        "completion_tokens": 985,
        "total_tokens": 2095,
        "estimated_cost_usd": 0.0112375
      }
    },
    {
      "url_name": "delete_tts_data_status",
      "callable": "clara_app.delete_tts_views.delete_tts_data_status",
      "module_repo_path": "clara_app/delete_tts_views.py",
      "short_summary": "Exposes views for administrators to delete cached TTS data for a selected language using an asynchronous background task. It sets up callback tracking for task updates, provides a monitor page and JSON polling endpoint, and reports completion status back to the user via Django messages and templates.",
      "proposed_docstring": "This module provides admin-only Django views to initiate, monitor, and report completion of asynchronous deletion of cached text-to-speech data for a given language. It wraps an AudioAnnotator helper to perform the deletion and uses django_q to run the task in the background, wiring up callback/report IDs so progress can be polled via a JSON status endpoint. The views render forms for selecting a language, redirect to a monitor page during execution, and surface success/error messages upon completion.",
      "key_responsibilities": [
        "Handle form submission to select a language and trigger asynchronous deletion of TTS data via django_q tasks.",
        "Create and pass callback/report identifiers to collect task progress updates and redirect users to a monitoring view.",
        "Expose a JSON endpoint that returns task update messages and a coarse status for client-side polling.",
        "Render monitoring and completion views, including user feedback through Django's messaging framework."
      ],
      "potential_issues": [
        "The variable name `messages` in `delete_tts_data_status` shadows the imported Django messages API, which could be confusing and may lead to mistakes if modified.",
        "Status detection in `delete_tts_data_status` checks for string membership in the messages list; if updates are structured differently, status may remain 'unknown'.",
        "There is limited error handling around the asynchronous task invocation; failures in `async_task` or `delete_tts_data_for_language` are not caught or surfaced beyond callback messages.",
        "The monitor view itself does not fetch or display status; it relies on client-side polling hitting the status endpoint, which must be implemented in templates/JavaScript."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_tts_data",
          "args_raw": [],
          "href_expr": "{% url 'delete_tts_data' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all cached TTS data for a given language.",
          "text": "Delete TTS data",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.delete_tts_views.delete_tts_data"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1110,
        "completion_tokens": 985,
        "total_tokens": 2095,
        "estimated_cost_usd": 0.0112375
      }
    },
    {
      "url_name": "edit_acknowledgements",
      "callable": "clara_app.annotation_views.edit_acknowledgements",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "edit_bundle",
      "callable": "clara_app.annotation_prompts_views.edit_bundle",
      "module_repo_path": "clara_app/annotation_prompts_views.py",
      "short_summary": "This module defines Django views for managing annotation prompt templates/examples and localisation translation bundles. The edit_prompt view lets language masters load or save prompt templates or example sets for various annotation types, dynamically constructing formsets and deferring persistence to a PromptTemplateRepository. The bundle_list and edit_bundle views show translation progress per bundle and allow authorised users to edit translations.",
      "proposed_docstring": "Django views handling editing of annotation prompt templates/examples and localisation bundles. Provides interfaces for language masters to select, load and save prompt templates and examples via formsets backed by PromptTemplateRepository, with right-to-left support and user-specific config. Also includes list/edit views for localisation bundles and translations, enforcing permissions and rendering appropriate templates with success/error messaging.",
      "key_responsibilities": [
        "Expose edit_prompt view to allow language masters to load and save prompt templates or annotation examples for a given language, annotation type and operation using dynamic formsets.",
        "Invoke PromptTemplateRepository to retrieve default or language-specific templates/examples and handle TemplateError conditions with user feedback.",
        "Render and process list/edit pages for localisation bundles, aggregating translation counts per language and persisting BundleTranslation updates.",
        "Enforce access control for language masters and translators, and use Django messages to report success or errors to the user."
      ],
      "potential_issues": [
        "edit_bundle returns HttpResponseForbidden without importing it, which will raise a NameError.",
        "In the save branch of edit_prompt for string pair formsets, it attempts to access new_prompts[-1][2] even though only two elements are collected, likely causing an IndexError.",
        "bundle_list currently uses print statements for debugging instead of the configured logger.",
        "Language column selection in bundle_list ignores existing translations (commented-out logic), potentially hiding languages with data if the user is not a master."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bundle_list",
          "args_raw": [],
          "href_expr": "{% url 'bundle_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all localisation bundles",
          "text": "List all localisation bundles",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.bundle_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_prompt",
          "args_raw": [],
          "href_expr": "{% url 'edit_prompt' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit the GPT-4 prompt templates and examples used to create text annotations for languages where you are a language master.",
          "text": "Edit annotation prompts",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.edit_prompt"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2764,
        "completion_tokens": 2441,
        "total_tokens": 5205,
        "estimated_cost_usd": 0.027865
      }
    },
    {
      "url_name": "edit_images",
      "callable": "clara_app.images_v1_views.edit_images",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "edit_images_v2",
      "callable": "clara_app.images_v2_views.edit_images_v2",
      "module_repo_path": "clara_app/images_v2_views.py",
      "short_summary": "Provides the edit_images_v2 view for configuring and managing coherent images for a CLARA project. Handles saving parameters and text content, deleting assets, downloading images, and kicking off asynchronous generation tasks for style, elements, and pages via django_q. Supplies monitoring/status endpoints and helper functions that interact with CLARAProjectInternal to generate content, store costs, and report task progress or errors. Broad exception handling flags inconsistencies and surfaces messages to the user.",
      "proposed_docstring": "Django views and background task helpers for managing coherent image set v2 within a CLARA project. This module renders and processes the main editing interface, allowing users to view and edit page texts and advice, adjust generation parameters, delete or download assets, and trigger AI-driven generation of style descriptions, element names, element/page descriptions, and images. It wires async tasks through django_q with status/monitor endpoints, relays cost and task updates, and interacts heavily with CLARAProjectInternal to persist changes and enforce content policy checks.",
      "key_responsibilities": [
        "Render the edit_images_v2 page and populate forms/formsets with project parameters, texts, advice, and existing style/element/page images.",
        "Process POST actions to save parameters, background/style/element/page advice and texts, delete images or elements, create overview documents, and download image archives.",
        "Initiate and monitor asynchronous AI-driven tasks (style description/image, element names/descriptions/images, page descriptions/images, adding elements) using django_q, with callback/report IDs and status JSON/monitor views.",
        "Helper functions to drive CLARAProjectInternal generation methods, record API costs, and post task updates while checking for content policy violations."
      ],
      "potential_issues": [
        "actions_requiring_openai includes 'generate_variant_images', but the edit_images_v2 view does not handle this action; the create_variant_images helper may never be invoked.",
        "Building page_data assumes indexed_page_data is non-empty (uses max(...)) and only adds entries when a page exists in indexed_page_data, contrary to the comment about creating entries for pages with no image.",
        "coherent_images_v2_status assigns to a local variable named messages, shadowing django.contrib.messages and may be confusing; it also relies on 'error'/'finished' being present in the returned list of messages.",
        "Exception handling is very broad and sometimes simply flags the interface as inconsistent, which may mask underlying bugs or leave the UI without forms.",
        "The duplicate import of get_element_names_params_from_project_params is redundant and could indicate copy-paste issues."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images_v2",
          "args_raw": [
            "project.id",
            "'none'"
          ],
          "href_expr": "{% url 'edit_images_v2' project.id 'none' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v2_views.edit_images_v2"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 7908,
        "completion_tokens": 2401,
        "total_tokens": 10309,
        "estimated_cost_usd": 0.033895
      }
    },
    {
      "url_name": "edit_phonetic_lexicon",
      "callable": "clara_app.phonetic_lexicon_views.edit_phonetic_lexicon",
      "module_repo_path": "clara_app/phonetic_lexicon_views.py",
      "short_summary": "This module implements Django views that allow authorized language masters to edit and import phonetic lexicon data. It handles saving orthography and lexicon entries, uploading aligned and plain lexicons (the latter via an asynchronous task), and provides endpoints to monitor and confirm import status. Templates are rendered with relevant formsets and progress data for user interaction.",
      "proposed_docstring": "Views for language masters to manage phonetic lexicons and orthography data. Provides a form-driven interface to refresh, edit, approve/delete plain and aligned lexicon entries, and update grapheme-to-phoneme correspondence and accent data. Supports uploading lexicon files, including an asynchronous import of plain lexicons with progress monitoring via django-q, and renders status/monitoring endpoints and completion redirects.",
      "key_responsibilities": [
        "Render and process the phonetic lexicon editing form with formsets for graphemephoneme correspondences, accents, and lexicon entries.",
        "Persist encoding, orthography data, and approved or deleted plain/aligned lexicon entries through repository objects with validation.",
        "Handle file uploads for aligned and plain phonetic lexicons, kicking off asynchronous import of plain lexicons and redirecting to monitoring views.",
        "Expose JSON status for background imports and render monitoring/completion pages with user feedback."
      ],
      "potential_issues": [
        "Temporary files from aligned lexicon uploads are not explicitly removed, unlike plain uploads, which may lead to leftover files.",
        "The `messages` name is reused as a local variable in `import_phonetic_lexicon_status`, which could be confusing given the imported `messages` from `django.contrib`.",
        "If no language is selected or the form is invalid, some branches may leave formsets uninitialized and could lead to template errors if not guarded.",
        "Errors in consistency checks or empty selections result in user messages but the control flow continues; maintainers should ensure templates handle missing or None formsets."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_phonetic_lexicon",
          "args_raw": [],
          "href_expr": "{% url 'edit_phonetic_lexicon' %}",
          "element": "a",
          "attr": "href",
          "title": "Upload or edit phonetic lexicon data for languages where you are a language master.",
          "text": "Edit phonetic lexicon",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.phonetic_lexicon_views.edit_phonetic_lexicon"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4239,
        "completion_tokens": 1186,
        "total_tokens": 5425,
        "estimated_cost_usd": 0.01715875
      }
    },
    {
      "url_name": "edit_profile",
      "callable": "clara_app.profile_views.edit_profile",
      "module_repo_path": "clara_app/profile_views.py",
      "short_summary": "This module defines Django views for editing a user's own profile and for viewing other users' profiles with friend request management. It processes profile and friend request forms, updates associated models, and renders the appropriate templates. It also triggers update feed entries and notification emails when friend actions occur.",
      "proposed_docstring": "Views for managing user profiles and friendship interactions. Provides a login-protected edit view for updating a user's own account and profile details via forms, and an external profile view that displays another user's profile and handles friend request actions. Integrates with utility functions to retrieve per-user configuration and record updates, renders profile-related templates, and sends notification emails on new friend requests.",
      "key_responsibilities": [
        "Handle profile edit requests for authenticated users using UserForm and UserProfileForm",
        "Render external user profiles and manage friend request actions such as send, accept, cancel, reject, and unfriend",
        "Send notification emails when a new friend request is created",
        "Retrieve user-specific configuration and include it in profile-related views"
      ],
      "potential_issues": [
        "The private profile check in external_profile references an undefined variable 'user' instead of the profile user, which will raise a NameError when a profile is marked private",
        "external_profile is not protected by login_required and calls get_user_config(request.user), which may fail or behave unexpectedly for anonymous users",
        "There is no guard against creating duplicate friend requests or ensuring the requester is authenticated before creating/deleting them",
        "Email sending is gated on an environment variable and otherwise only prints, which may lead to missed notifications outside the specified environment"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_profile",
          "args_raw": [],
          "href_expr": "{% url 'edit_profile' %}",
          "element": "a",
          "attr": "href",
          "title": "Enter/edit your location, bio, profile picture etc.",
          "text": "Edit user profile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.profile_views.edit_profile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1150,
        "completion_tokens": 1437,
        "total_tokens": 2587,
        "estimated_cost_usd": 0.0158075
      }
    },
    {
      "url_name": "edit_prompt",
      "callable": "clara_app.annotation_prompts_views.edit_prompt",
      "module_repo_path": "clara_app/annotation_prompts_views.py",
      "short_summary": "This module defines Django views for managing annotation prompt templates/examples and localisation translation bundles. The edit_prompt view lets language masters load or save prompt templates or example sets for various annotation types, dynamically constructing formsets and deferring persistence to a PromptTemplateRepository. The bundle_list and edit_bundle views show translation progress per bundle and allow authorised users to edit translations.",
      "proposed_docstring": "Django views handling editing of annotation prompt templates/examples and localisation bundles. Provides interfaces for language masters to select, load and save prompt templates and examples via formsets backed by PromptTemplateRepository, with right-to-left support and user-specific config. Also includes list/edit views for localisation bundles and translations, enforcing permissions and rendering appropriate templates with success/error messaging.",
      "key_responsibilities": [
        "Expose edit_prompt view to allow language masters to load and save prompt templates or annotation examples for a given language, annotation type and operation using dynamic formsets.",
        "Invoke PromptTemplateRepository to retrieve default or language-specific templates/examples and handle TemplateError conditions with user feedback.",
        "Render and process list/edit pages for localisation bundles, aggregating translation counts per language and persisting BundleTranslation updates.",
        "Enforce access control for language masters and translators, and use Django messages to report success or errors to the user."
      ],
      "potential_issues": [
        "edit_bundle returns HttpResponseForbidden without importing it, which will raise a NameError.",
        "In the save branch of edit_prompt for string pair formsets, it attempts to access new_prompts[-1][2] even though only two elements are collected, likely causing an IndexError.",
        "bundle_list currently uses print statements for debugging instead of the configured logger.",
        "Language column selection in bundle_list ignores existing translations (commented-out logic), potentially hiding languages with data if the user is not a master."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bundle_list",
          "args_raw": [],
          "href_expr": "{% url 'bundle_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all localisation bundles",
          "text": "List all localisation bundles",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.bundle_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_prompt",
          "args_raw": [],
          "href_expr": "{% url 'edit_prompt' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit the GPT-4 prompt templates and examples used to create text annotations for languages where you are a language master.",
          "text": "Edit annotation prompts",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.annotation_prompts_views.edit_prompt"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2764,
        "completion_tokens": 2441,
        "total_tokens": 5205,
        "estimated_cost_usd": 0.027865
      }
    },
    {
      "url_name": "execute_community_requests_for_page_monitor",
      "callable": "clara_app.community_reviewing_views.execute_community_requests_for_page_monitor",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "execute_community_requests_for_page_status",
      "callable": "clara_app.community_reviewing_views.execute_community_requests_for_page_status",
      "module_repo_path": "clara_app/community_reviewing_views.py",
      "short_summary": "This module contains Django views for community review of CLARA project images. It allows members and coordinators to overview pages, drill into a page to vote on or hide images, request variants, upload new images, and leave advice. It also exposes an external view of page descriptions and handles kicking off and monitoring asynchronous execution of approved community requests.",
      "proposed_docstring": "Views to support community review and coordination of coherent images in CLARA projects. This module exposes entry points for community members, coordinators, and external users to browse pages, view and vote on alternate images, upload or request variants, and leave advice on a per-page basis. It orchestrates page-level review workflows, updates AI feedback data, and triggers asynchronous execution of approved community requests via django-q. Supporting utilities read project data from the file system, enforce user roles, track task status, and render the appropriate templates.",
      "key_responsibilities": [
        "Render overview and per-page review pages for community members, coordinators, and external reviewers, pulling story and alternate image data from project files.",
        "Process POST actions on a page (voting, hiding/unhiding images, requesting variants, uploading images, setting request status, adding advice) and persist feedback via helper utilities.",
        "Trigger asynchronous execution of approved community requests using django-q tasks, and provide status/monitoring endpoints for those tasks.",
        "Update AI-derived feedback and promote preferred images in project storage based on community input."
      ],
      "potential_issues": [
        "Use of asyncio.run within synchronous views to load alternate images may block the server under load.",
        "Indexing story_data by page_number - 1 assumes the page_number is valid; no bounds checking could lead to IndexErrors if malformed URLs are hit.",
        "In execute_community_requests_for_page_status, the simplistic `'error' in messages` / `'finished' in messages` check assumes specific strings in task updates and may misclassify status; the local variable shadows the imported messages module.",
        "The upload_image branch expects a FILES key named 'uploaded_image_file_path'; mismatched form fields will silently fail with a generic error.",
        "Preferred image promotion relies on get_page_description_info_for_cm_reviewing returning a valid preferred_image_id; unexpected values could cause unintended promotion."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_organiser_review_images",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_organiser_review_images' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as community organiser",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_organiser_review_images"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "community_review_images_external",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'community_review_images_external' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Review images as non-community member",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_reviewing_views.community_review_images_external"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2956,
        "completion_tokens": 1893,
        "total_tokens": 4849,
        "estimated_cost_usd": 0.022625
      }
    },
    {
      "url_name": "execute_simple_clara_element_requests_monitor",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_element_requests_monitor",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "execute_simple_clara_element_requests_status",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_element_requests_status",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "execute_simple_clara_image_requests_monitor",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_image_requests_monitor",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "execute_simple_clara_image_requests_status",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_image_requests_status",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "execute_simple_clara_style_requests_monitor",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_style_requests_monitor",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "execute_simple_clara_style_requests_status",
      "callable": "clara_app.simple_clara_views.execute_simple_clara_style_requests_status",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "external_profile",
      "callable": "clara_app.profile_views.external_profile",
      "module_repo_path": "clara_app/profile_views.py",
      "short_summary": "This module defines Django views for editing a user's own profile and for viewing other users' profiles with friend request management. It processes profile and friend request forms, updates associated models, and renders the appropriate templates. It also triggers update feed entries and notification emails when friend actions occur.",
      "proposed_docstring": "Views for managing user profiles and friendship interactions. Provides a login-protected edit view for updating a user's own account and profile details via forms, and an external profile view that displays another user's profile and handles friend request actions. Integrates with utility functions to retrieve per-user configuration and record updates, renders profile-related templates, and sends notification emails on new friend requests.",
      "key_responsibilities": [
        "Handle profile edit requests for authenticated users using UserForm and UserProfileForm",
        "Render external user profiles and manage friend request actions such as send, accept, cancel, reject, and unfriend",
        "Send notification emails when a new friend request is created",
        "Retrieve user-specific configuration and include it in profile-related views"
      ],
      "potential_issues": [
        "The private profile check in external_profile references an undefined variable 'user' instead of the profile user, which will raise a NameError when a profile is marked private",
        "external_profile is not protected by login_required and calls get_user_config(request.user), which may fail or behave unexpectedly for anonymous users",
        "There is no guard against creating duplicate friend requests or ensuring the requester is authenticated before creating/deleting them",
        "Email sending is gated on an environment variable and otherwise only prints, which may lead to missed notifications outside the specified environment"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_profile",
          "args_raw": [],
          "href_expr": "{% url 'edit_profile' %}",
          "element": "a",
          "attr": "href",
          "title": "Enter/edit your location, bio, profile picture etc.",
          "text": "Edit user profile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.profile_views.edit_profile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1150,
        "completion_tokens": 1437,
        "total_tokens": 2587,
        "estimated_cost_usd": 0.0158075
      }
    },
    {
      "url_name": "friends",
      "callable": "clara_app.users_and_friends_views.friends",
      "module_repo_path": "clara_app/users_and_friends_views.py",
      "short_summary": "This module implements two Django views requiring authentication. The user listing view filters, sorts, and paginates all users and renders them in a template. The friends view collects the logged-in user's profile, pending friend requests, current friends, and configuration to display a friendship management page. It uses helper utilities and models to assemble the context for the templates.",
      "proposed_docstring": "Defines login-protected views for listing users and managing friendships within the Clara app. Provides endpoints to render a paginated list of users with optional username search and sorting, and to display the current user's friendship status including incoming and outgoing friend requests, current friends, and user-specific configuration such as Clara version. Interacts with the built-in User model, a FriendRequest model, helper utilities, and renders corresponding templates.",
      "key_responsibilities": [
        "Render a paginated list of users with optional search by username and sorting by username or join date",
        "Retrieve and display the current user's profile, incoming/outgoing friend requests, and current friends",
        "Fetch user-specific configuration (e.g., Clara version) to include in the friends page context",
        "Coordinate database queries and pass context to the appropriate templates for rendering"
      ],
      "potential_issues": [
        "Assumes every authenticated user has an associated userprofile attribute; missing profiles will raise errors",
        "The current user is not excluded from the user list, which may or may not be intended",
        "Unused configuration and logger variables suggest leftover or incomplete instrumentation",
        "No handling for unexpected sort parameters beyond defaulting to date joined ordering"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_users",
          "args_raw": [],
          "href_expr": "{% url 'list_users' %}",
          "element": "a",
          "attr": "href",
          "title": "Show all users. You can send friend requests to users with public profiles.",
          "text": "Users",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.users_and_friends_views.list_users"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "friends",
          "args_raw": [],
          "href_expr": "{% url 'friends' %}",
          "element": "a",
          "attr": "href",
          "title": "Show friends and outstanding friend requests.",
          "text": "Friends",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.users_and_friends_views.friends"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 632,
        "completion_tokens": 1557,
        "total_tokens": 2189,
        "estimated_cost_usd": 0.01636
      }
    },
    {
      "url_name": "funding_request",
      "callable": "clara_app.funding_requests_views.funding_request",
      "module_repo_path": "clara_app/funding_requests_views.py",
      "short_summary": "This module defines Django views for creating and processing funding requests within the C-LARA application. Authenticated users can submit new requests, while reviewers can filter and approve them, triggering an email confirmation step. Upon confirmation, the code updates request statuses, transfers credits between user profiles, and notifies requesters via email.",
      "proposed_docstring": "Views to handle the C-LARA funding workflow: allowing authenticated users to submit funding requests, enabling designated reviewers to search, review and approve requests, and confirming approvals with a emailed confirmation code before transferring credits. Reviewers can filter requests, allocate funds via a formset, and the module orchestrates email notifications and session storage of pending transfers, updating FundingRequest records and user balances upon confirmation.",
      "key_responsibilities": [
        "Render and process the funding request submission form for logged-in users",
        "Allow reviewers to filter funding requests and allocate credits via an approval formset",
        "Send confirmation emails to reviewers and handle confirmation code input to finalize approvals",
        "Update FundingRequest records, adjust user profile credit balances, and notify requesters of approvals"
      ],
      "potential_issues": [
        "Credit balance checks and transfers are not wrapped in a transaction and may be subject to race conditions or mid-process balance changes.",
        "Approval processing relies on form POST data without re-querying or validating the current status of each FundingRequest, which could allow tampering or approving already-processed requests.",
        "Credit assignments are cast to int, potentially dropping cents and causing rounding errors when dealing with Decimal fields.",
        "Initial formset status uses display labels from choices; if the ApproveFundingRequestFormSet expects raw status values, there may be mismatches between displayed and processed statuses.",
        "Email anonymization logic assumes email length and may produce odd results for short addresses."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "funding_request",
          "args_raw": [],
          "href_expr": "{% url 'funding_request' %}",
          "element": "a",
          "attr": "href",
          "title": "Submit a request to get a small amount of OpenAI credit",
          "text": "Funding request",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.funding_request"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "review_funding_requests",
          "args_raw": [],
          "href_expr": "{% url 'review_funding_requests' %}",
          "element": "a",
          "attr": "href",
          "title": "Review funding requests",
          "text": "Review funding requests",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.review_funding_requests"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1975,
        "completion_tokens": 1411,
        "total_tokens": 3386,
        "estimated_cost_usd": 0.01657875
      }
    },
    {
      "url_name": "generate_annotated_segmented_file",
      "callable": "clara_app.human_audio_views.generate_annotated_segmented_file",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "generate_audio_metadata",
      "callable": "clara_app.human_audio_views.generate_audio_metadata",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "generate_audio_metadata_phonetic",
      "callable": "clara_app.human_audio_views.generate_audio_metadata_phonetic",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "generate_text_complete",
      "callable": "clara_app.annotation_views.generate_text_complete",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "generate_text_monitor",
      "callable": "clara_app.annotation_views.generate_text_monitor",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "generate_text_status",
      "callable": "clara_app.annotation_views.generate_text_status",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "get_audio_metadata",
      "callable": "clara_app.human_audio_views.get_audio_metadata_view",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "get_metadata_for_version",
      "callable": "clara_app.comparing_views.get_metadata_for_version",
      "module_repo_path": "clara_app/comparing_views.py",
      "short_summary": "This module defines Django views to support comparing file versions within a CLARA project. It exposes a JSON API to retrieve metadata for a specific version and a form-based interface that lets logged-in users select files, compute diffs, and render the results. The views rely on CLARAProjectInternal for metadata and diffing and dynamically adjust form choices based on available metadata.",
      "proposed_docstring": "View handlers for comparing different versions of CLARA project texts and exposing version metadata. This module provides a JSON endpoint to fetch file metadata for a given project version and a form-driven page to select two files and compute a diff between them using CLARAProjectInternal. Form choices are populated dynamically from project metadata, diff markup is converted to HTML, and errors are reported through Django's messages framework.",
      "key_responsibilities": [
        "Fetch and return project file metadata for a specified version as JSON to authenticated users with project roles.",
        "Render and process a form for selecting two files and a version to compute a textual diff via CLARAProjectInternal.",
        "Populate form choices dynamically from project metadata and render diff results with basic markup-to-HTML conversion.",
        "Handle internalisation errors by surfacing messages and re-rendering the selection form."
      ],
      "potential_issues": [
        "Form validation is bypassed and request.POST is accessed directly; malformed or missing POST data may cause errors or bypass expected validation.",
        "Dynamic population of form choices could be why form validation fails; choices are set after instantiation and may not match posted values.",
        "The template context on POST does not include clara_version, which may be expected by the template and could cause rendering issues.",
        "Unused configuration and logger imports suggest missing logging; errors in diff conversion are not logged and could be hard to trace.",
        "No handling if requested version or files are absent from metadata; CLARAProjectInternal.diff_editions_of_text_version may raise or fail silently."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "compare_versions",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'compare_versions' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Compare Text Versions",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.comparing_views.compare_versions"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1146,
        "completion_tokens": 1116,
        "total_tokens": 2262,
        "estimated_cost_usd": 0.0125925
      }
    },
    {
      "url_name": "home",
      "callable": "clara_app.home_views.home",
      "module_repo_path": "clara_app/home_views.py",
      "short_summary": "This module defines the home and landing page views for the C-LARA application. It routes users to community-specific pages or a general home based on their memberships and authentication status. It renders the main home page with recent contents and activities filtered by a selectable time period, and orders activities by status for display.",
      "proposed_docstring": "Views for directing users to appropriate C-LARA landing pages, determining whether to show a generic home, a community-specific home, or a selection screen based on their memberships. Provides the main home page rendering recent content and activities filtered by a configurable time period, with support for a unified search form. Includes helper logic to annotate and order activities for display and simple redirects for login and default home access.",
      "key_responsibilities": [
        "Redirect unauthenticated or generic home requests to appropriate login or home URLs.",
        "Determine and route users to community homes, the generic C-LARA home, or a selection page based on community memberships.",
        "Render the main C-LARA home page with recent content and activities filtered by a time period from a search form.",
        "Annotate and order activity querysets by status and creation date for presentation."
      ],
      "potential_issues": [
        "The general home/home_page views are not decorated with login_required, so anonymous users may hit them and produce unexpected redirects or behavior.",
        "Community membership checks in home_page perform separate queries (exists/count/first), which may be inefficient; using count could produce extra database hits.",
        "The get_config() call assigns to config but is unused in this module, indicating possible leftover or missing configuration usage.",
        "The time_period conversion in clara_home_page assumes form validation ensures an integer; malformed GET parameters could still cause errors if validation is bypassed."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "home_page",
          "args_raw": [],
          "href_expr": "{% url 'home_page' %}",
          "element": "a",
          "attr": "href",
          "title": "Home page: show recent activities and content",
          "text": null,
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.home_views.home_page"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 808,
        "completion_tokens": 955,
        "total_tokens": 1763,
        "estimated_cost_usd": 0.01056
      }
    },
    {
      "url_name": "home-redirect",
      "callable": "clara_app.home_views.redirect_login",
      "module_repo_path": "clara_app/home_views.py",
      "short_summary": "This module defines the home and landing page views for the C-LARA application. It routes users to community-specific pages or a general home based on their memberships and authentication status. It renders the main home page with recent contents and activities filtered by a selectable time period, and orders activities by status for display.",
      "proposed_docstring": "Views for directing users to appropriate C-LARA landing pages, determining whether to show a generic home, a community-specific home, or a selection screen based on their memberships. Provides the main home page rendering recent content and activities filtered by a configurable time period, with support for a unified search form. Includes helper logic to annotate and order activities for display and simple redirects for login and default home access.",
      "key_responsibilities": [
        "Redirect unauthenticated or generic home requests to appropriate login or home URLs.",
        "Determine and route users to community homes, the generic C-LARA home, or a selection page based on community memberships.",
        "Render the main C-LARA home page with recent content and activities filtered by a time period from a search form.",
        "Annotate and order activity querysets by status and creation date for presentation."
      ],
      "potential_issues": [
        "The general home/home_page views are not decorated with login_required, so anonymous users may hit them and produce unexpected redirects or behavior.",
        "Community membership checks in home_page perform separate queries (exists/count/first), which may be inefficient; using count could produce extra database hits.",
        "The get_config() call assigns to config but is unused in this module, indicating possible leftover or missing configuration usage.",
        "The time_period conversion in clara_home_page assumes form validation ensures an integer; malformed GET parameters could still cause errors if validation is bypassed."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "home_page",
          "args_raw": [],
          "href_expr": "{% url 'home_page' %}",
          "element": "a",
          "attr": "href",
          "title": "Home page: show recent activities and content",
          "text": null,
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.home_views.home_page"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 808,
        "completion_tokens": 955,
        "total_tokens": 1763,
        "estimated_cost_usd": 0.01056
      }
    },
    {
      "url_name": "home_page",
      "callable": "clara_app.home_views.home_page",
      "module_repo_path": "clara_app/home_views.py",
      "short_summary": "This module defines the home and landing page views for the C-LARA application. It routes users to community-specific pages or a general home based on their memberships and authentication status. It renders the main home page with recent contents and activities filtered by a selectable time period, and orders activities by status for display.",
      "proposed_docstring": "Views for directing users to appropriate C-LARA landing pages, determining whether to show a generic home, a community-specific home, or a selection screen based on their memberships. Provides the main home page rendering recent content and activities filtered by a configurable time period, with support for a unified search form. Includes helper logic to annotate and order activities for display and simple redirects for login and default home access.",
      "key_responsibilities": [
        "Redirect unauthenticated or generic home requests to appropriate login or home URLs.",
        "Determine and route users to community homes, the generic C-LARA home, or a selection page based on community memberships.",
        "Render the main C-LARA home page with recent content and activities filtered by a time period from a search form.",
        "Annotate and order activity querysets by status and creation date for presentation."
      ],
      "potential_issues": [
        "The general home/home_page views are not decorated with login_required, so anonymous users may hit them and produce unexpected redirects or behavior.",
        "Community membership checks in home_page perform separate queries (exists/count/first), which may be inefficient; using count could produce extra database hits.",
        "The get_config() call assigns to config but is unused in this module, indicating possible leftover or missing configuration usage.",
        "The time_period conversion in clara_home_page assumes form validation ensures an integer; malformed GET parameters could still cause errors if validation is bypassed."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "home_page",
          "args_raw": [],
          "href_expr": "{% url 'home_page' %}",
          "element": "a",
          "attr": "href",
          "title": "Home page: show recent activities and content",
          "text": null,
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.home_views.home_page"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 808,
        "completion_tokens": 955,
        "total_tokens": 1763,
        "estimated_cost_usd": 0.01056
      }
    },
    {
      "url_name": "human_audio_processing",
      "callable": "clara_app.human_audio_views.human_audio_processing",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "human_audio_processing_phonetic",
      "callable": "clara_app.human_audio_views.human_audio_processing_phonetic",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "image_and_text_questionnaire_start",
      "callable": "clara_app.image_questionnaire_views.image_and_text_questionnaire_start",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_only_questionnaire_start",
      "callable": "clara_app.image_questionnaire_views.image_only_questionnaire_start",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_all_projects_summary",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_item",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_item",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_project_list",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_start",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_start",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_summary",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_summary",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "image_questionnaire_summary_csv",
      "callable": "clara_app.image_questionnaire_views.image_questionnaire_summary_csv",
      "module_repo_path": "clara_app/image_questionnaire_views.py",
      "short_summary": "This module implements the Django views that power an image (and optional text) questionnaire on CLARA projects. It filters and lists projects with questionnaires, initializes questionnaire state from project files, and guides users through page-by-page rating forms with localisation support. It provides summary pages and CSV exports of responses, and helper functions to detect continuity between pages.",
      "proposed_docstring": "Views for administering and participating in the image questionnaire flow for CLARA projects. This module lists eligible projects, initializes questionnaire state by generating rendered text and loading story data, and drives the per-page question display, submission, and navigation. It also provides per-user and global summaries and CSV export of collected ratings, and utility helpers for determining relevant elements across pages.",
      "key_responsibilities": [
        "Present a filtered list of projects that have image questionnaires and handle questionnaire start routes for image-only or image-and-text modes.",
        "Initialize questionnaire sessions by rendering text for questionnaires, reading story data, determining available pages with images, and storing state in the session.",
        "Render individual questionnaire pages with images, text snippets, localised questions, and handle POST submissions to save or update ImageQuestionnaireResponse ratings and comments, including navigation between pages.",
        "Provide per-user summary of responses, aggregate summaries across all projects with averaged ratings, and export raw questionnaire data as CSV.",
        "Utility functions to read relevant elements per page and find prior pages sharing elements to enable continuity questions."
      ],
      "potential_issues": [
        "The raw CSV export and all-projects summary lack permission checks and could expose other users' responses to any authenticated user.",
        "Session storage of `image_questionnaire_pages` and include_text flags relies on prior start views; if session data is missing or cleared, users may be redirected unexpectedly.",
        "Debugging code prints the full context with `pprint`, which may log sensitive or large payloads in production.",
        "Question text in aggregated summaries and CSV is taken from hardcoded constants and not localised; UI and data export may not reflect translated strings.",
        "Reliance on file-based project data (story JSON, relevant elements, rendered HTML snippets) means missing or stale files can cause errors or skipped questions; error handling currently redirects with generic messages."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_project_list",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_project_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find projects with image questionnaires",
          "text": "Find image questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_all_projects_summary",
          "args_raw": [],
          "href_expr": "{% url 'image_questionnaire_all_projects_summary' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for image quality questionnaires.",
          "text": "Questionnaire summary (images)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_all_projects_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "image_questionnaire_start",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'image_questionnaire_start' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Image questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.image_questionnaire_views.image_questionnaire_start"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5223,
        "completion_tokens": 1562,
        "total_tokens": 6785,
        "estimated_cost_usd": 0.022148750000000002
      }
    },
    {
      "url_name": "import_phonetic_lexicon_complete",
      "callable": "clara_app.phonetic_lexicon_views.import_phonetic_lexicon_complete",
      "module_repo_path": "clara_app/phonetic_lexicon_views.py",
      "short_summary": "This module implements Django views that allow authorized language masters to edit and import phonetic lexicon data. It handles saving orthography and lexicon entries, uploading aligned and plain lexicons (the latter via an asynchronous task), and provides endpoints to monitor and confirm import status. Templates are rendered with relevant formsets and progress data for user interaction.",
      "proposed_docstring": "Views for language masters to manage phonetic lexicons and orthography data. Provides a form-driven interface to refresh, edit, approve/delete plain and aligned lexicon entries, and update grapheme-to-phoneme correspondence and accent data. Supports uploading lexicon files, including an asynchronous import of plain lexicons with progress monitoring via django-q, and renders status/monitoring endpoints and completion redirects.",
      "key_responsibilities": [
        "Render and process the phonetic lexicon editing form with formsets for graphemephoneme correspondences, accents, and lexicon entries.",
        "Persist encoding, orthography data, and approved or deleted plain/aligned lexicon entries through repository objects with validation.",
        "Handle file uploads for aligned and plain phonetic lexicons, kicking off asynchronous import of plain lexicons and redirecting to monitoring views.",
        "Expose JSON status for background imports and render monitoring/completion pages with user feedback."
      ],
      "potential_issues": [
        "Temporary files from aligned lexicon uploads are not explicitly removed, unlike plain uploads, which may lead to leftover files.",
        "The `messages` name is reused as a local variable in `import_phonetic_lexicon_status`, which could be confusing given the imported `messages` from `django.contrib`.",
        "If no language is selected or the form is invalid, some branches may leave formsets uninitialized and could lead to template errors if not guarded.",
        "Errors in consistency checks or empty selections result in user messages but the control flow continues; maintainers should ensure templates handle missing or None formsets."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_phonetic_lexicon",
          "args_raw": [],
          "href_expr": "{% url 'edit_phonetic_lexicon' %}",
          "element": "a",
          "attr": "href",
          "title": "Upload or edit phonetic lexicon data for languages where you are a language master.",
          "text": "Edit phonetic lexicon",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.phonetic_lexicon_views.edit_phonetic_lexicon"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4239,
        "completion_tokens": 1186,
        "total_tokens": 5425,
        "estimated_cost_usd": 0.01715875
      }
    },
    {
      "url_name": "import_phonetic_lexicon_monitor",
      "callable": "clara_app.phonetic_lexicon_views.import_phonetic_lexicon_monitor",
      "module_repo_path": "clara_app/phonetic_lexicon_views.py",
      "short_summary": "This module implements Django views that allow authorized language masters to edit and import phonetic lexicon data. It handles saving orthography and lexicon entries, uploading aligned and plain lexicons (the latter via an asynchronous task), and provides endpoints to monitor and confirm import status. Templates are rendered with relevant formsets and progress data for user interaction.",
      "proposed_docstring": "Views for language masters to manage phonetic lexicons and orthography data. Provides a form-driven interface to refresh, edit, approve/delete plain and aligned lexicon entries, and update grapheme-to-phoneme correspondence and accent data. Supports uploading lexicon files, including an asynchronous import of plain lexicons with progress monitoring via django-q, and renders status/monitoring endpoints and completion redirects.",
      "key_responsibilities": [
        "Render and process the phonetic lexicon editing form with formsets for graphemephoneme correspondences, accents, and lexicon entries.",
        "Persist encoding, orthography data, and approved or deleted plain/aligned lexicon entries through repository objects with validation.",
        "Handle file uploads for aligned and plain phonetic lexicons, kicking off asynchronous import of plain lexicons and redirecting to monitoring views.",
        "Expose JSON status for background imports and render monitoring/completion pages with user feedback."
      ],
      "potential_issues": [
        "Temporary files from aligned lexicon uploads are not explicitly removed, unlike plain uploads, which may lead to leftover files.",
        "The `messages` name is reused as a local variable in `import_phonetic_lexicon_status`, which could be confusing given the imported `messages` from `django.contrib`.",
        "If no language is selected or the form is invalid, some branches may leave formsets uninitialized and could lead to template errors if not guarded.",
        "Errors in consistency checks or empty selections result in user messages but the control flow continues; maintainers should ensure templates handle missing or None formsets."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_phonetic_lexicon",
          "args_raw": [],
          "href_expr": "{% url 'edit_phonetic_lexicon' %}",
          "element": "a",
          "attr": "href",
          "title": "Upload or edit phonetic lexicon data for languages where you are a language master.",
          "text": "Edit phonetic lexicon",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.phonetic_lexicon_views.edit_phonetic_lexicon"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4239,
        "completion_tokens": 1186,
        "total_tokens": 5425,
        "estimated_cost_usd": 0.01715875
      }
    },
    {
      "url_name": "import_phonetic_lexicon_status",
      "callable": "clara_app.phonetic_lexicon_views.import_phonetic_lexicon_status",
      "module_repo_path": "clara_app/phonetic_lexicon_views.py",
      "short_summary": "This module implements Django views that allow authorized language masters to edit and import phonetic lexicon data. It handles saving orthography and lexicon entries, uploading aligned and plain lexicons (the latter via an asynchronous task), and provides endpoints to monitor and confirm import status. Templates are rendered with relevant formsets and progress data for user interaction.",
      "proposed_docstring": "Views for language masters to manage phonetic lexicons and orthography data. Provides a form-driven interface to refresh, edit, approve/delete plain and aligned lexicon entries, and update grapheme-to-phoneme correspondence and accent data. Supports uploading lexicon files, including an asynchronous import of plain lexicons with progress monitoring via django-q, and renders status/monitoring endpoints and completion redirects.",
      "key_responsibilities": [
        "Render and process the phonetic lexicon editing form with formsets for graphemephoneme correspondences, accents, and lexicon entries.",
        "Persist encoding, orthography data, and approved or deleted plain/aligned lexicon entries through repository objects with validation.",
        "Handle file uploads for aligned and plain phonetic lexicons, kicking off asynchronous import of plain lexicons and redirecting to monitoring views.",
        "Expose JSON status for background imports and render monitoring/completion pages with user feedback."
      ],
      "potential_issues": [
        "Temporary files from aligned lexicon uploads are not explicitly removed, unlike plain uploads, which may lead to leftover files.",
        "The `messages` name is reused as a local variable in `import_phonetic_lexicon_status`, which could be confusing given the imported `messages` from `django.contrib`.",
        "If no language is selected or the form is invalid, some branches may leave formsets uninitialized and could lead to template errors if not guarded.",
        "Errors in consistency checks or empty selections result in user messages but the control flow continues; maintainers should ensure templates handle missing or None formsets."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_phonetic_lexicon",
          "args_raw": [],
          "href_expr": "{% url 'edit_phonetic_lexicon' %}",
          "element": "a",
          "attr": "href",
          "title": "Upload or edit phonetic lexicon data for languages where you are a language master.",
          "text": "Edit phonetic lexicon",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.phonetic_lexicon_views.edit_phonetic_lexicon"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4239,
        "completion_tokens": 1186,
        "total_tokens": 5425,
        "estimated_cost_usd": 0.01715875
      }
    },
    {
      "url_name": "import_project",
      "callable": "clara_app.create_project_views.import_project",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "import_project_complete",
      "callable": "clara_app.create_project_views.import_project_complete",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "import_project_monitor",
      "callable": "clara_app.create_project_views.import_project_monitor",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "import_project_status",
      "callable": "clara_app.create_project_views.import_project_status",
      "module_repo_path": "clara_app/create_project_views.py",
      "short_summary": "This module defines the views for creating a C-LARA project, importing one from a zip export via a django_q background task, and cloning an existing project. It orchestrates creation of CLARAProject and CLARAProjectInternal records, updates metadata such as audio settings from imported files, and provides JSON endpoints and pages to monitor import status. File handling utilities manage temporary storage and S3 transfers when needed.",
      "proposed_docstring": "Django views for creating, importing, monitoring, and cloning C-LARA projects. This module handles user-facing forms to set up new projects, kicks off asynchronous imports of exported project zip files and reconstructs their internal representation and metadata, and exposes polling endpoints and templates to monitor background tasks. It also provides a cloning workflow that duplicates an existing project and copies its internal assets, integrating with CLARAProjectInternal, audio metadata models, and various file-handling utilities.",
      "key_responsibilities": [
        "Render and process project creation forms, validating mutually exclusive options and initializing CLARAProject and CLARAProjectInternal instances.",
        "Handle project import requests by saving uploaded zip files, scheduling asynchronous reconstruction of internal projects from exports, and updating project metadata and audio info.",
        "Expose status and monitoring views that return task updates as JSON or render polling templates for long-running imports.",
        "Implement project cloning by creating a new project with copied metadata and copying internal assets from an existing CLARAProjectInternal."
      ],
      "potential_issues": [
        "In the clone_project workflow, the internal ID is generated before the new project is saved, so the primary key may be None when computing the ID.",
        "import_project_from_zip_file posts an error if internal project creation fails but does not return early, potentially leading to attribute access on None and exceptions.",
        "Imported projects are initially created with placeholder languages; if the import fails the project may remain with incorrect l1/l2 values.",
        "File cleanup via remove_file runs in all cases and may delete the uploaded zip from S3/local storage even if retries are desired.",
        "Mutually exclusive coherent image set flags are checked on creation but not when importing or cloning, so inconsistent combinations might slip through."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_project",
          "args_raw": [],
          "href_expr": "{% url 'create_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project, specifying the title, the text language, and the annotation language.",
          "text": "Create new C-LARA project using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.create_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "import_project",
          "args_raw": [],
          "href_expr": "{% url 'import_project' %}",
          "element": "a",
          "attr": "href",
          "title": "Import a project from a zipfile created using the 'Export zipfile' command.",
          "text": "Import C-LARA project from zipfile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.create_project_views.import_project"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "clone_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'clone_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Clone Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.create_project_views.clone_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 3471,
        "completion_tokens": 2701,
        "total_tokens": 6172,
        "estimated_cost_usd": 0.03134875
      }
    },
    {
      "url_name": "kok_kaper_game",
      "callable": "clara_app.language_game_views.kok_kaper_animal_game",
      "module_repo_path": "clara_app/language_game_views.py",
      "short_summary": "This module defines the view logic for the Kok Kaper animal game. It loads game data from a JSON file, caches it, and uses it to render a template with selectable animals, body parts, and adjectives. The view builds sentences and image paths based on POSTed selections, persists user choices in the session, and gracefully handles missing data or assets.",
      "proposed_docstring": "Views for the Kok Kaper animal language game. This module loads and caches the game's JSON data, renders the game page with user-selected animals, body parts, and adjectives, constructs Kok Kaper and English sentences and image paths, and handles missing data with user-friendly messages and fallback templates.",
      "key_responsibilities": [
        "Load and cache Kok Kaper game data from a JSON file via `get_game_data`",
        "Render the main game view, initializing selections and flags from the session and request",
        "Construct Kok Kaper and English sentences and image paths based on user selections",
        "Persist user selections back to the session and surface missing data or images via Django messages",
        "Render a fallback template when game data is unavailable"
      ],
      "potential_issues": [
        "Cached game data is never invalidated; updates to the JSON file will not be picked up until process restart",
        "If POSTed animal, part, or adjective IDs are invalid, `next(...)` lookups will raise StopIteration and error",
        "The bool conversion of `request.POST.get(\"show_gloss\")` may not reflect actual checkbox intent for non-empty strings",
        "Default selection assumes non-empty data lists; empty game data could cause errors in `_default`",
        "The commented-out `@login_required` means the view is accessible without authentication, which may or may not be intended"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "kok_kaper_game",
          "args_raw": [],
          "href_expr": "{% url 'kok_kaper_game' %}",
          "element": "a",
          "attr": "href",
          "title": "Use the Australian language Kok Kaper to make pictures of funny animals",
          "text": "Kok Kaper animal game",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_game_views.kok_kaper_animal_game"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1068,
        "completion_tokens": 1215,
        "total_tokens": 2283,
        "estimated_cost_usd": 0.013484999999999999
      }
    },
    {
      "url_name": "language_statistics",
      "callable": "clara_app.content_views.language_statistics",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "list_activities",
      "callable": "clara_app.activity_tracker_views.list_activities",
      "module_repo_path": "clara_app/activity_tracker_views.py",
      "short_summary": "This module defines Django views for creating, viewing, updating, and listing activities within the application. It supports commenting, registration, status/resolution changes, and weighted voting on activities, and sends email notifications to relevant users when new comments are posted. Admin-only views provide a plain text summary for AI consumption and accept AI-submitted activity updates and votes. Helpers annotate activity querysets with vote scores and status ordering for display.",
      "proposed_docstring": "Views for the activity tracker: handle creation of new activities, display and update of individual activity records with comments, registrations, voting, status and resolution changes, and notification of participants by email. Provides list views for browsing activities, including an admin-only plain text summary intended for AI integration, and accepts AI-generated updates, comments, new activities and votes. Utilities are provided to annotate and order activity querysets for display and to enforce weekly voting uniqueness via get_zoom_meeting_start_date.",
      "key_responsibilities": [
        "Create new activities via ActivityForm and redirect to detail views",
        "Render activity detail pages with commenting, registration, status/resolution updates, and vote handling tied to weekly periods",
        "Notify activity creators, voters, and commenters of new comments via email templating and environment-aware sending",
        "List activities with search/filter options and annotate them with vote scores and status ordering for display",
        "Provide an admin-only plain text activity summary with instructions/examples for AI updates, and process AI-submitted comments, new activities, and votes"
      ],
      "potential_issues": [
        "create_activity does not render the form with errors on invalid POST and may return None, leading to a server error",
        "activity_detail can fall through on a POST with invalid form data and attempt to render without initializing required context variables (UnboundLocalError), and the vote branch redirects even when the form is invalid, hiding errors",
        "ai_activities_reply assumes a user named 'ai_user' and a well-formed updates_json payload; missing users or keys will raise exceptions, and broad exception handling may mask specific failures",
        "The uniqueness check for vote importance relies on Application logic; without database constraints, duplicate importance votes could slip through under concurrent requests",
        "list_activities_text defines week_start but does not use it; filtering logic differs slightly from list_activities"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities",
          "args_raw": [],
          "href_expr": "{% url 'list_activities' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities or register a new activity.",
          "text": "Project activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities_text",
          "args_raw": [],
          "href_expr": "{% url 'list_activities_text' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities in plain text form. Mainly for AI.",
          "text": "Activities (plain text version)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "ai_activities_reply",
          "args_raw": [],
          "href_expr": "{% url 'ai_activities_reply' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a JSON structure written by the AI, which updates the activities.",
          "text": "Post AI updates to activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.ai_activities_reply"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4199,
        "completion_tokens": 3691,
        "total_tokens": 7890,
        "estimated_cost_usd": 0.042158749999999995
      }
    },
    {
      "url_name": "list_activities_text",
      "callable": "clara_app.activity_tracker_views.list_activities_text",
      "module_repo_path": "clara_app/activity_tracker_views.py",
      "short_summary": "This module defines Django views for creating, viewing, updating, and listing activities within the application. It supports commenting, registration, status/resolution changes, and weighted voting on activities, and sends email notifications to relevant users when new comments are posted. Admin-only views provide a plain text summary for AI consumption and accept AI-submitted activity updates and votes. Helpers annotate activity querysets with vote scores and status ordering for display.",
      "proposed_docstring": "Views for the activity tracker: handle creation of new activities, display and update of individual activity records with comments, registrations, voting, status and resolution changes, and notification of participants by email. Provides list views for browsing activities, including an admin-only plain text summary intended for AI integration, and accepts AI-generated updates, comments, new activities and votes. Utilities are provided to annotate and order activity querysets for display and to enforce weekly voting uniqueness via get_zoom_meeting_start_date.",
      "key_responsibilities": [
        "Create new activities via ActivityForm and redirect to detail views",
        "Render activity detail pages with commenting, registration, status/resolution updates, and vote handling tied to weekly periods",
        "Notify activity creators, voters, and commenters of new comments via email templating and environment-aware sending",
        "List activities with search/filter options and annotate them with vote scores and status ordering for display",
        "Provide an admin-only plain text activity summary with instructions/examples for AI updates, and process AI-submitted comments, new activities, and votes"
      ],
      "potential_issues": [
        "create_activity does not render the form with errors on invalid POST and may return None, leading to a server error",
        "activity_detail can fall through on a POST with invalid form data and attempt to render without initializing required context variables (UnboundLocalError), and the vote branch redirects even when the form is invalid, hiding errors",
        "ai_activities_reply assumes a user named 'ai_user' and a well-formed updates_json payload; missing users or keys will raise exceptions, and broad exception handling may mask specific failures",
        "The uniqueness check for vote importance relies on Application logic; without database constraints, duplicate importance votes could slip through under concurrent requests",
        "list_activities_text defines week_start but does not use it; filtering logic differs slightly from list_activities"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities",
          "args_raw": [],
          "href_expr": "{% url 'list_activities' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities or register a new activity.",
          "text": "Project activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_activities_text",
          "args_raw": [],
          "href_expr": "{% url 'list_activities_text' %}",
          "element": "a",
          "attr": "href",
          "title": "List ongoing project activities in plain text form. Mainly for AI.",
          "text": "Activities (plain text version)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.list_activities_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "ai_activities_reply",
          "args_raw": [],
          "href_expr": "{% url 'ai_activities_reply' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a JSON structure written by the AI, which updates the activities.",
          "text": "Post AI updates to activities",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.activity_tracker_views.ai_activities_reply"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4199,
        "completion_tokens": 3691,
        "total_tokens": 7890,
        "estimated_cost_usd": 0.042158749999999995
      }
    },
    {
      "url_name": "list_users",
      "callable": "clara_app.users_and_friends_views.list_users",
      "module_repo_path": "clara_app/users_and_friends_views.py",
      "short_summary": "This module implements two Django views requiring authentication. The user listing view filters, sorts, and paginates all users and renders them in a template. The friends view collects the logged-in user's profile, pending friend requests, current friends, and configuration to display a friendship management page. It uses helper utilities and models to assemble the context for the templates.",
      "proposed_docstring": "Defines login-protected views for listing users and managing friendships within the Clara app. Provides endpoints to render a paginated list of users with optional username search and sorting, and to display the current user's friendship status including incoming and outgoing friend requests, current friends, and user-specific configuration such as Clara version. Interacts with the built-in User model, a FriendRequest model, helper utilities, and renders corresponding templates.",
      "key_responsibilities": [
        "Render a paginated list of users with optional search by username and sorting by username or join date",
        "Retrieve and display the current user's profile, incoming/outgoing friend requests, and current friends",
        "Fetch user-specific configuration (e.g., Clara version) to include in the friends page context",
        "Coordinate database queries and pass context to the appropriate templates for rendering"
      ],
      "potential_issues": [
        "Assumes every authenticated user has an associated userprofile attribute; missing profiles will raise errors",
        "The current user is not excluded from the user list, which may or may not be intended",
        "Unused configuration and logger variables suggest leftover or incomplete instrumentation",
        "No handling for unexpected sort parameters beyond defaulting to date joined ordering"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "list_users",
          "args_raw": [],
          "href_expr": "{% url 'list_users' %}",
          "element": "a",
          "attr": "href",
          "title": "Show all users. You can send friend requests to users with public profiles.",
          "text": "Users",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.users_and_friends_views.list_users"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "friends",
          "args_raw": [],
          "href_expr": "{% url 'friends' %}",
          "element": "a",
          "attr": "href",
          "title": "Show friends and outstanding friend requests.",
          "text": "Friends",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.users_and_friends_views.friends"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 632,
        "completion_tokens": 1557,
        "total_tokens": 2189,
        "estimated_cost_usd": 0.01636
      }
    },
    {
      "url_name": "make_export_zipfile",
      "callable": "clara_app.export_zipfile_views.make_export_zipfile",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "make_export_zipfile_complete",
      "callable": "clara_app.export_zipfile_views.make_export_zipfile_complete",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "make_export_zipfile_monitor",
      "callable": "clara_app.export_zipfile_views.make_export_zipfile_monitor",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "make_export_zipfile_status",
      "callable": "clara_app.export_zipfile_views.make_export_zipfile_status",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "manage_content_passwords",
      "callable": "clara_app.content_password_views.manage_content_passwords",
      "module_repo_path": "clara_app/content_password_views.py",
      "short_summary": "This module implements Django views to list and update passwords on content tied to projects the current user owns. It renders a management page showing protected content and per-item forms, and provides POST handlers to set/change or clear a content password. Access is enforced via an owner assertion and feedback is communicated through Django's messages framework.",
      "proposed_docstring": "Views for managing password protection on Content objects owned by a user. Provides an owner check helper and three entry points: a listing page of protected content with per-row update forms, and POST handlers to set/change or clear a password and hint. Interacts with the Content and CLARAProject models, a ContentPasswordUpdateForm, and uses Django messages and templates to render feedback and redirect to the management page.",
      "key_responsibilities": [
        "Filter and render password-protected Content items for projects owned by the requesting user.",
        "Instantiate and pass ContentPasswordUpdateForm instances to the management template for each item.",
        "Handle POST requests to clear an existing content password after asserting ownership.",
        "Handle POST requests to set or change a content password and hint, treating empty input as a clear operation and persisting changes with appropriate success messages."
      ],
      "potential_issues": [
        "Protected content filtering excludes only NULL password hashes; records with empty strings may still appear unexpectedly.",
        "The type hint on `_assert_owner` suggests `CLARAProjectInternal` but is passed a `Content.project`, which could be confusing if types diverge.",
        "Unused import of `timezone` and commented out rate limiting hints at missing brute-force protection or incomplete cleanup.",
        "Only project owners are allowed; if other roles should manage passwords this check would need adjustment."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_content_passwords",
          "args_raw": [],
          "href_expr": "{% url 'manage_content_passwords' %}",
          "element": "a",
          "attr": "href",
          "title": "Change or remove passwords on content where you have set them.",
          "text": "Change/remove content passwords",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_password_views.manage_content_passwords"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1000,
        "completion_tokens": 1452,
        "total_tokens": 2452,
        "estimated_cost_usd": 0.01577
      }
    },
    {
      "url_name": "manage_language_masters",
      "callable": "clara_app.language_masters_views.manage_language_masters",
      "module_repo_path": "clara_app/language_masters_views.py",
      "short_summary": "This module defines admin-restricted Django views for managing language master assignments and localisation bundles. It lets administrators add or remove LanguageMaster records and upload or load bundles of keytext pairs. The views use standard form handling, message feedback and template rendering with user configuration context.",
      "proposed_docstring": "Views in this module support administrative management of language masters and localisation bundles. It exposes admin-only endpoints to list, assign and remove LanguageMaster privileges, and to create, load or save bundles of localisation strings. The views validate input, coordinate updates to the associated models within transactions, surface success and error messages, and render the relevant templates with configuration data for display.",
      "key_responsibilities": [
        "List existing LanguageMaster records and process assignments via AssignLanguageMasterForm for administrators.",
        "Confirm and delete LanguageMaster privileges by primary key.",
        "Provide an interface to load existing LocalisationBundle contents into a form and to validate and save uploaded bundles of key/TAB/text lines.",
        "Render management and confirmation templates with user configuration and feedback messages."
      ],
      "potential_issues": [
        "Imports for user_can_translate, get_config, config, and logger are unused, which could indicate leftover or missing functionality.",
        "The localisation bundle save routine updates or creates items but does not delete bundle items removed from the uploaded data, so stale keys may persist.",
        "Access control assumes a userprofile with an is_admin attribute; missing or misconfigured profiles could raise errors.",
        "Retrieving 'clara_version' from get_user_config may fail if that configuration key is absent."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_language_masters",
          "args_raw": [],
          "href_expr": "{% url 'manage_language_masters' %}",
          "element": "a",
          "attr": "href",
          "title": "Give users 'language master' privileges, so that they can customise annotation prompts and edit phonetic lexicon data.",
          "text": "Manage language masters",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.manage_language_masters"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "post_localisation_bundle",
          "args_raw": [],
          "href_expr": "{% url 'post_localisation_bundle' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a localisation bundle so that language masters can define translations",
          "text": "Post a localisation bundle",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.post_localisation_bundle"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1544,
        "completion_tokens": 1364,
        "total_tokens": 2908,
        "estimated_cost_usd": 0.015569999999999999
      }
    },
    {
      "url_name": "manage_project_members",
      "callable": "clara_app.manipulate_project_views.manage_project_members",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "manage_questionnaires",
      "callable": "clara_app.satisfaction_questionnaire_views.manage_questionnaires",
      "module_repo_path": "clara_app/satisfaction_questionnaire_views.py",
      "short_summary": "This module contains Django view functions for the satisfaction questionnaire workflow. Authenticated users can submit and update their own questionnaires for a project, and view questionnaires. Questionnaire reviewers can list, export to Excel, or delete responses. An aggregation view computes averaged ratings and distributions for reporting templates.",
      "proposed_docstring": "Views for handling satisfaction questionnaires associated with CLARA projects. This module provides endpoints for users to fill in or update their own questionnaire, view a submitted questionnaire, and for reviewers to manage responses, including exporting or deleting them. It also exposes an aggregation view that computes summary statistics and distributions of responses for reporting templates.",
      "key_responsibilities": [
        "Render and process the satisfaction questionnaire form for a given project and the current user, creating or updating their response.",
        "Display a read-only questionnaire response for a specified project/user pair.",
        "Provide a management interface for questionnaire reviewers to list, export all responses to an Excel file, or delete selected submissions.",
        "Aggregate questionnaire data (averages, distributions, recent free-text answers) and render them for reporting."
      ],
      "potential_issues": [
        "The aggregation view has no access control; any visitor could access aggregate results unless protected elsewhere.",
        "show_questionnaire allows any authenticated user to view any user's questionnaire if they know the IDs, which may be a privacy concern.",
        "manage_questionnaires relies on a u.userprofile attribute; if a User lacks a related profile, user_passes_test will raise an error.",
        "Excel export and aggregation over all responses could be memory intensive with a large dataset and lacks pagination or streaming.",
        "Timezone conversion is applied only to the created_at field in exports; other datetime fields may remain timezone-aware if present.",
        "config and logger are initialized but not used in this module."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "aggregated_questionnaire_results",
          "args_raw": [],
          "href_expr": "{% url 'aggregated_questionnaire_results' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for satisfaction questionnaires.",
          "text": "Questionnaire summary (projects)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.aggregated_questionnaire_results"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_questionnaires",
          "args_raw": [],
          "href_expr": "{% url 'manage_questionnaires' %}",
          "element": "a",
          "attr": "href",
          "title": "Review and possibly delete questionnaires",
          "text": "Review questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.manage_questionnaires"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "satisfaction_questionnaire",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'satisfaction_questionnaire' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Answer Satisfaction Questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.satisfaction_questionnaire_views.satisfaction_questionnaire"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1739,
        "completion_tokens": 895,
        "total_tokens": 2634,
        "estimated_cost_usd": 0.01112375
      }
    },
    {
      "url_name": "manage_user_permissions",
      "callable": "clara_app.admin_permission_views.manage_user_permissions",
      "module_repo_path": "clara_app/admin_permission_views.py",
      "short_summary": "This module defines administrator-facing views for managing users and project permissions in the CLARA app. It allows admins to reset other users' passwords, search for projects and add themselves as co-owners, and select users to update their profile permissions. Access is restricted to logged-in users flagged as admins, and the views coordinate form validation, model updates, and template rendering with appropriate feedback.",
      "proposed_docstring": "Admin-only Django views for managing user accounts, permissions, and project ownership within the CLARA application. It exposes endpoints to manually reset user passwords, search and self-assign co-ownership of projects, and select and update user profile permissions, all gated by login and an is_admin check. The views orchestrate form handling, model updates for projects and permissions, and rendering of templates with configuration details such as the CLARA version, using Django's messaging framework for user feedback.",
      "key_responsibilities": [
        "Restrict access to admin-only operations using login and user_passes_test decorators checking UserProfile.is_admin.",
        "Handle the AdminPasswordResetForm to reset another user's password and provide success/error messaging.",
        "Search and filter CLARAProject records, render a selection formset, and create ProjectPermissions entries to grant the current admin an OWNER role on chosen projects.",
        "Render a workflow to select a user and update their UserProfile permissions via UserPermissionsForm, persisting changes and redirecting on success.",
        "Supply templates with necessary context such as form instances and the current CLARA version retrieved from user configuration."
      ],
      "potential_issues": [
        "The `config` variable and logger are defined but unused, suggesting leftover or incomplete logging/configuration handling.",
        "In `admin_project_ownership`, no check prevents creating duplicate ProjectPermissions; repeated submissions could add redundant owner entries if not constrained at the model level.",
        "If the project selection formset is invalid on POST, `projects_info` is not defined before rendering, which could raise an error in the template context.",
        "The admin checks assume every user has an associated UserProfile; missing profiles would cause attribute errors in the user_passes_test lambdas.",
        "Using `CLARAProject.objects.get` without error handling in `admin_project_ownership` may raise exceptions for invalid project IDs instead of returning a 404."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_user_permissions",
          "args_raw": [],
          "href_expr": "{% url 'manage_user_permissions' %}",
          "element": "a",
          "attr": "href",
          "title": "Manage permissions for funding request reviewer, moderator and admin",
          "text": "Manage permissions",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.manage_user_permissions"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_password_reset",
          "args_raw": [],
          "href_expr": "{% url 'admin_password_reset' %}",
          "element": "a",
          "attr": "href",
          "title": "Manually reset a user's password, in case they cannot use the normal password reset.",
          "text": "Manually reset user's password",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_password_reset"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "admin_project_ownership",
          "args_raw": [],
          "href_expr": "{% url 'admin_project_ownership' %}",
          "element": "a",
          "attr": "href",
          "title": "Give yourself a COOWNER role on a project, if you are an admin and need to access it urgently for some reason.",
          "text": "Make yourself co-owner of a project",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.admin_permission_views.admin_project_ownership"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1261,
        "completion_tokens": 2665,
        "total_tokens": 3926,
        "estimated_cost_usd": 0.02822625
      }
    },
    {
      "url_name": "offer_to_register_content_normal",
      "callable": "clara_app.content_views.offer_to_register_content_normal",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "offer_to_register_content_phonetic",
      "callable": "clara_app.content_views.offer_to_register_content_phonetic",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "post_localisation_bundle",
      "callable": "clara_app.language_masters_views.post_localisation_bundle",
      "module_repo_path": "clara_app/language_masters_views.py",
      "short_summary": "This module defines admin-restricted Django views for managing language master assignments and localisation bundles. It lets administrators add or remove LanguageMaster records and upload or load bundles of keytext pairs. The views use standard form handling, message feedback and template rendering with user configuration context.",
      "proposed_docstring": "Views in this module support administrative management of language masters and localisation bundles. It exposes admin-only endpoints to list, assign and remove LanguageMaster privileges, and to create, load or save bundles of localisation strings. The views validate input, coordinate updates to the associated models within transactions, surface success and error messages, and render the relevant templates with configuration data for display.",
      "key_responsibilities": [
        "List existing LanguageMaster records and process assignments via AssignLanguageMasterForm for administrators.",
        "Confirm and delete LanguageMaster privileges by primary key.",
        "Provide an interface to load existing LocalisationBundle contents into a form and to validate and save uploaded bundles of key/TAB/text lines.",
        "Render management and confirmation templates with user configuration and feedback messages."
      ],
      "potential_issues": [
        "Imports for user_can_translate, get_config, config, and logger are unused, which could indicate leftover or missing functionality.",
        "The localisation bundle save routine updates or creates items but does not delete bundle items removed from the uploaded data, so stale keys may persist.",
        "Access control assumes a userprofile with an is_admin attribute; missing or misconfigured profiles could raise errors.",
        "Retrieving 'clara_version' from get_user_config may fail if that configuration key is absent."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_language_masters",
          "args_raw": [],
          "href_expr": "{% url 'manage_language_masters' %}",
          "element": "a",
          "attr": "href",
          "title": "Give users 'language master' privileges, so that they can customise annotation prompts and edit phonetic lexicon data.",
          "text": "Manage language masters",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.manage_language_masters"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "post_localisation_bundle",
          "args_raw": [],
          "href_expr": "{% url 'post_localisation_bundle' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a localisation bundle so that language masters can define translations",
          "text": "Post a localisation bundle",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.post_localisation_bundle"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1544,
        "completion_tokens": 1364,
        "total_tokens": 2908,
        "estimated_cost_usd": 0.015569999999999999
      }
    },
    {
      "url_name": "process_ldt_zipfile_complete",
      "callable": "clara_app.human_audio_views.process_ldt_zipfile_complete",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "process_ldt_zipfile_monitor",
      "callable": "clara_app.human_audio_views.process_ldt_zipfile_monitor",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "process_ldt_zipfile_status",
      "callable": "clara_app.human_audio_views.process_ldt_zipfile_status",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "process_manual_alignment_complete",
      "callable": "clara_app.human_audio_views.process_manual_alignment_complete",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "process_manual_alignment_monitor",
      "callable": "clara_app.human_audio_views.process_manual_alignment_monitor",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "process_manual_alignment_status",
      "callable": "clara_app.human_audio_views.process_manual_alignment_status",
      "module_repo_path": "clara_app/human_audio_views.py",
      "short_summary": "This module defines Django views to collect, upload, and process human audio assets for CLARA projects. It handles form submissions for different acquisition methods, kicks off asynchronous processing jobs for LiteDevTools zipfiles and manual alignment, and provides monitoring and completion endpoints. It also exposes utilities to download audio metadata or annotated segmented text for external tools, with parallel support for phonetic data.",
      "proposed_docstring": "Views for managing human voice audio in CLARA projects. This module exposes forms to upload or record audio clips, trigger manual text/audio alignment, and handle phonetic and non-phonetic workflows. It wires up asynchronous processing of LiteDevTools zipfiles and alignment tasks, provides monitoring/status endpoints, and serves downloadable metadata or annotated text for recorder and alignment tooling.",
      "key_responsibilities": [
        "Render and process forms/formsets for human audio uploads, manual alignment inputs, and phonetic audio settings tied to a project",
        "Initiate asynchronous tasks to process LiteDevTools zipfiles and manual alignment data, and provide polling/monitoring and completion views",
        "Persist uploaded audio files and metadata via AudioRepositoryORM, handling local/S3 file transfer as needed",
        "Serve downloadable audio metadata and labelled segmented text for recorder and alignment tooling (normal and phonetic variants)"
      ],
      "potential_issues": [
        "In the phonetic workflow, form validity is not checked and POST data is used directly, which may bypass validation and lead to inconsistent state",
        "The phonetic upload flow redirects to the non-phonetic view on formset validation error, which may be unintended",
        "Form saving restores existing file fields manually; if form.save clears file fields, incorrect restoration could occur if not carefully handled",
        "CLARAProjectInternal instances are passed to async tasks; if the task runner uses separate processes, pickling these objects may fail",
        "Local variable names shadow imported `messages` in status views, which could be confusing though not functionally harmful"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "human_audio_processing_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'human_audio_processing_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Audio Processing (Phonetic)",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.human_audio_views.human_audio_processing_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 6799,
        "completion_tokens": 2469,
        "total_tokens": 9268,
        "estimated_cost_usd": 0.033188749999999996
      }
    },
    {
      "url_name": "profile",
      "callable": "clara_app.accounts_views.profile",
      "module_repo_path": "clara_app/accounts_views.py",
      "short_summary": "This module defines custom views around user signup and profile display, leaving login/logout to Django's built-in auth views. The registration view processes a RegistrationForm, saves the user, and initializes related UserProfile and UserConfiguration records before redirecting to login. The profile view ensures a profile exists and renders it along with email and Clara version information. Templates under `clara_app` are used to render both pages and success messages are flashed on successful registration.",
      "proposed_docstring": "Views module handling user registration and profile display for the Clara app, complementing Django's built-in authentication. It renders a registration form, creates associated profile and configuration records on signup, and exposes a login-protected profile view that shows account details and user-specific Clara configuration.",
      "key_responsibilities": [
        "Render and process the user registration form, creating a new user account.",
        "Initialize linked UserProfile and UserConfiguration objects upon successful signup.",
        "Provide a login-protected profile view that retrieves or creates a UserProfile and displays email and Clara version from user configuration.",
        "Interact with Django messaging and template system to deliver feedback and UI."
      ],
      "potential_issues": [
        "The code manually sets and saves the user's email after `form.save()`, which may be redundant if the form already handles email.",
        "UserConfiguration is only created at registration; if missing for an existing user, `get_user_config` might fail or lack a `'clara_version'` key.",
        "Registration view redirects to login without logging the user in or providing feedback on invalid submissions beyond the form errors.",
        "No `get_or_create` is used for UserConfiguration in the profile view, so missing configs could raise errors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "profile",
          "args_raw": [],
          "href_expr": "{% url 'profile' %}",
          "element": "a",
          "attr": "href",
          "title": "Display your location, bio, profile picture etc.",
          "text": "Display user profile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.accounts_views.profile"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register",
          "args_raw": [],
          "href_expr": "{% url 'register' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new account, giving a userid, password and email address.",
          "text": "Sign up",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.accounts_views.register"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 524,
        "completion_tokens": 1071,
        "total_tokens": 1595,
        "estimated_cost_usd": 0.011364999999999998
      }
    },
    {
      "url_name": "project_community",
      "callable": "clara_app.community_views.project_community",
      "module_repo_path": "clara_app/community_views.py",
      "short_summary": "This module defines community-related views such as creating and deleting communities, assigning coordinators and members, and linking projects to communities. It uses login and permission decorators, form handling, and template rendering with Django messages to guide users through these workflows. A community home view requires membership and presents community-specific projects.",
      "proposed_docstring": "Django view functions for community management in the CLARA app, covering creation, deletion, membership assignment, and project association. It enforces admin or coordinator permissions via login checks, user_passes_test, and custom decorators, uses model-backed forms to gather user and community selections, and renders templates with contextual data and message feedback. Community home access is gated by membership, and project owners can assign or clear a community on their projects with basic validation of language compatibility.",
      "key_responsibilities": [
        "Provide admin-only interfaces to create new Community records and manage their deletion with confirmation.",
        "Allow admins to assign coordinator roles and coordinators to assign member roles to users within permitted communities via forms.",
        "Render a community home page that enforces membership and supplies community and project context to templates.",
        "Enable project owners to assign or remove a project's associated community, validating language compatibility before saving."
      ],
      "potential_issues": [
        "Role string comparisons are inconsistent (e.g. using 'COORDINATOR' when assigning roles but checking for 'CO' in community_home), which may prevent coordinator-specific logic from running.",
        "create_community redirects without flashing a success or error message, which may leave users without feedback on the operation.",
        "Community deletion is performed directly and may not account for related objects or cascade effects; additional checks or safeguards might be needed.",
        "community_home includes a print statement for debugging that could clutter logs and exposes the role value.",
        "Project-community assignment relies on manual conversion of community IDs from strings and catches only ValueError/ValidationError; unexpected data could still cause errors or may need clearer user feedback."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_member_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_member_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Add a new member to a community for which you are coordinator.",
          "text": "Add member to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_member_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_community",
          "args_raw": [],
          "href_expr": "{% url 'create_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new community for image reviewing and similar activities.",
          "text": "Create community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.create_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_community_menu",
          "args_raw": [],
          "href_expr": "{% url 'delete_community_menu' %}",
          "element": "a",
          "attr": "href",
          "title": "Delete an existing community.",
          "text": "Delete community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.delete_community_menu"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "assign_coordinator_to_community",
          "args_raw": [],
          "href_expr": "{% url 'assign_coordinator_to_community' %}",
          "element": "a",
          "attr": "href",
          "title": "Assign a coordinator to an language community.",
          "text": "Assign coordinator to community",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.community_views.assign_coordinator_to_community"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_community",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_community' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Community",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.community_views.project_community"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1985,
        "completion_tokens": 2341,
        "total_tokens": 4326,
        "estimated_cost_usd": 0.02589125
      }
    },
    {
      "url_name": "project_detail",
      "callable": "clara_app.manipulate_project_views.project_detail",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "project_history",
      "callable": "clara_app.manipulate_project_views.project_history",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "project_list",
      "callable": "clara_app.manipulate_project_views.project_list",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "public_content_detail",
      "callable": "clara_app.content_views.public_content_detail",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "public_content_list",
      "callable": "clara_app.content_views.public_content_list",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "public_content_manifest",
      "callable": "clara_app.public_api_views.public_content_manifest",
      "module_repo_path": "clara_app/public_api_views.py",
      "short_summary": "This module defines a public API view to generate a JSON manifest for a content item. It loads a Content record, locates its compiled page HTML files, extracts text and image URLs, and returns structured metadata. The GET endpoint disables caching and enables CORS for broad consumption.",
      "proposed_docstring": "Exposes a public JSON manifest endpoint for CLARA content, building metadata and page information for a given Content record. The module provides a GET view that assembles page data from compiled output files, converts HTML to plain text, extracts image URLs, and returns a manifest suitable for consumption by agents. Responses are configured to disable caching, allow cross-origin access, and include generation metadata. A helper constructs the manifest data structure, raising 404 when content is missing.",
      "key_responsibilities": [
        "Handle GET requests to serve a JSON manifest for a given content ID via public_content_manifest1.",
        "Fetch content metadata from the Content model and derive the project output directory to locate compiled HTML pages.",
        "Parse page HTML into plain text and collect image source URLs for inclusion in the manifest.",
        "Configure HTTP response headers to prevent caching and allow cross-origin access."
      ],
      "potential_issues": [
        "Accessing content.project.id and content.project.user assumes a related project exists; missing relations could raise errors.",
        "Author masking falls back to content.author if no project_id, which may not be present on the model.",
        "Image extraction uses a naive regex that may miss or misparse complex HTML and attributes.",
        "The loop over page_X.html continues until file_exists returns false; incorrect file_exists behavior could cause long or infinite loops.",
        "Open CORS and xframe_options_exempt may have security implications if the endpoint should be restricted.",
        "Response headers set Access-Control-Allow-Origin twice and include unused imports."
      ],
      "ui_entrypoints": [],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1039,
        "completion_tokens": 1544,
        "total_tokens": 2583,
        "estimated_cost_usd": 0.01673875
      }
    },
    {
      "url_name": "public_content_manifest1",
      "callable": "clara_app.public_api_views.public_content_manifest1",
      "module_repo_path": "clara_app/public_api_views.py",
      "short_summary": "This module defines a public API view to generate a JSON manifest for a content item. It loads a Content record, locates its compiled page HTML files, extracts text and image URLs, and returns structured metadata. The GET endpoint disables caching and enables CORS for broad consumption.",
      "proposed_docstring": "Exposes a public JSON manifest endpoint for CLARA content, building metadata and page information for a given Content record. The module provides a GET view that assembles page data from compiled output files, converts HTML to plain text, extracts image URLs, and returns a manifest suitable for consumption by agents. Responses are configured to disable caching, allow cross-origin access, and include generation metadata. A helper constructs the manifest data structure, raising 404 when content is missing.",
      "key_responsibilities": [
        "Handle GET requests to serve a JSON manifest for a given content ID via public_content_manifest1.",
        "Fetch content metadata from the Content model and derive the project output directory to locate compiled HTML pages.",
        "Parse page HTML into plain text and collect image source URLs for inclusion in the manifest.",
        "Configure HTTP response headers to prevent caching and allow cross-origin access."
      ],
      "potential_issues": [
        "Accessing content.project.id and content.project.user assumes a related project exists; missing relations could raise errors.",
        "Author masking falls back to content.author if no project_id, which may not be present on the model.",
        "Image extraction uses a naive regex that may miss or misparse complex HTML and attributes.",
        "The loop over page_X.html continues until file_exists returns false; incorrect file_exists behavior could cause long or infinite loops.",
        "Open CORS and xframe_options_exempt may have security implications if the endpoint should be restricted.",
        "Response headers set Access-Control-Allow-Origin twice and include unused imports."
      ],
      "ui_entrypoints": [],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1039,
        "completion_tokens": 1544,
        "total_tokens": 2583,
        "estimated_cost_usd": 0.01673875
      }
    },
    {
      "url_name": "reading_history",
      "callable": "clara_app.reading_histories_views.reading_history",
      "module_repo_path": "clara_app/reading_histories_views.py",
      "short_summary": "This module implements the UI and workflow around user reading histories, keyed by L2 language. It handles displaying and modifying a reading history, creating backing CLARA projects, and invoking background tasks to append projects and recompile combined texts. It also provides status endpoints and helper functions to determine eligible languages and projects based on stored content and phonetic resource availability.",
      "proposed_docstring": "Django views to manage a user's reading history per L2, including creation of associated CLARA projects, listing and removing items, toggling phonetic preferences, and adding new projects asynchronously. Exposes endpoints to kick off background compilation of a combined reading history, poll its status, and render monitoring pages, while populating templates with available languages, projects, and configuration. Helper routines enumerate L2 languages and projects with saved internalised text suitable for inclusion. Integrates closely with CLARAProjectInternal/ReadingHistoryInternal to render combined texts, including phonetic variants when requested.",
      "key_responsibilities": [
        "Render and process the reading_history view to select L2, delete histories, toggle phonetic text preference, and add projects to a history.",
        "Create associated CLARAProject and internal representations for a new reading history and check for rendered HTML availability.",
        "Kick off and monitor asynchronous update_reading_history tasks that combine component CLARA projects into a compiled reading history, with optional phonetic rendering.",
        "Expose JSON status polling via update_reading_history_status and a monitoring page that uses JavaScript to poll task progress.",
        "Enumerate available L2s and CLARA projects that have posted content and saved internalised texts for inclusion in a reading history."
      ],
      "potential_issues": [
        "The asynchronous task update_reading_history receives Django model instances and custom classes; depending on django_q serialization, passing these objects may lead to pickling or stale-state issues.",
        "Using get_object_or_404 in a background task may raise Http404 outside a request/response context; a simple get() with proper error handling may be more appropriate.",
        "Variable shadowing of the imported messages module in update_reading_history_status could be confusing, though contained within the function.",
        "If reading_history exists without an associated project (e.g. inconsistent data), access to reading_history.project will fail; deletion does not handle cleanup of rendered HTML beyond the current internal object.",
        "POST paths that do not hit a return may lead to undefined form/context variables before rendering; current logic assumes all POST branches redirect."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "reading_history",
          "args_raw": [
            "'english'",
            "'init'"
          ],
          "href_expr": "{% url 'reading_history' 'english' 'init' %}",
          "element": "a",
          "attr": "href",
          "title": "Access your reading history for a given language, or add a new project to it.",
          "text": "Reading histories",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.reading_histories_views.reading_history"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2873,
        "completion_tokens": 2126,
        "total_tokens": 4999,
        "estimated_cost_usd": 0.02485125
      }
    },
    {
      "url_name": "register",
      "callable": "clara_app.accounts_views.register",
      "module_repo_path": "clara_app/accounts_views.py",
      "short_summary": "This module defines custom views around user signup and profile display, leaving login/logout to Django's built-in auth views. The registration view processes a RegistrationForm, saves the user, and initializes related UserProfile and UserConfiguration records before redirecting to login. The profile view ensures a profile exists and renders it along with email and Clara version information. Templates under `clara_app` are used to render both pages and success messages are flashed on successful registration.",
      "proposed_docstring": "Views module handling user registration and profile display for the Clara app, complementing Django's built-in authentication. It renders a registration form, creates associated profile and configuration records on signup, and exposes a login-protected profile view that shows account details and user-specific Clara configuration.",
      "key_responsibilities": [
        "Render and process the user registration form, creating a new user account.",
        "Initialize linked UserProfile and UserConfiguration objects upon successful signup.",
        "Provide a login-protected profile view that retrieves or creates a UserProfile and displays email and Clara version from user configuration.",
        "Interact with Django messaging and template system to deliver feedback and UI."
      ],
      "potential_issues": [
        "The code manually sets and saves the user's email after `form.save()`, which may be redundant if the form already handles email.",
        "UserConfiguration is only created at registration; if missing for an existing user, `get_user_config` might fail or lack a `'clara_version'` key.",
        "Registration view redirects to login without logging the user in or providing feedback on invalid submissions beyond the form errors.",
        "No `get_or_create` is used for UserConfiguration in the profile view, so missing configs could raise errors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "profile",
          "args_raw": [],
          "href_expr": "{% url 'profile' %}",
          "element": "a",
          "attr": "href",
          "title": "Display your location, bio, profile picture etc.",
          "text": "Display user profile",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.accounts_views.profile"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register",
          "args_raw": [],
          "href_expr": "{% url 'register' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new account, giving a userid, password and email address.",
          "text": "Sign up",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.accounts_views.register"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 524,
        "completion_tokens": 1071,
        "total_tokens": 1595,
        "estimated_cost_usd": 0.011364999999999998
      }
    },
    {
      "url_name": "register_content",
      "callable": "clara_app.content_views.register_content",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "register_project_content",
      "callable": "clara_app.content_views.register_project_content",
      "module_repo_path": "clara_app/content_views.py",
      "short_summary": "This module defines Django views for registering, listing and viewing content in the C-LARA application. It handles project-based and external content registration, search and sort of content lists, and detail pages with ratings, comments, zip downloads and password protection. Public-facing counterparts expose similar functionality with unlock tokens and manifests, and language statistics are computed for reporting.",
      "proposed_docstring": "Views for managing C-LARA content: registering rendered project texts or external URLs, listing and filtering available content, and displaying detail pages with ratings, comments and optional password protection. Provides both authenticated and public-facing variants of content lists and detail views, including unlock handling, access counting, email notifications and zip-file generation. Also exposes language-level statistics and simple throttling of password attempts via cache.",
      "key_responsibilities": [
        "Offer and process registration of rendered project content or external content via forms, with optional password protection and update feed entries.",
        "Render authenticated and public content lists with search filters, ordering and pagination.",
        "Display content detail pages, handling protected unlock flows, access counting, ratings, comments, deletion, zip availability and notification emails.",
        "Serve public detail pages with manifest retrieval, unlock token signing and throttled password attempts, and trigger zip build for project content.",
        "Aggregate and render per-language statistics on projects and content."
      ],
      "potential_issues": [
        "PermissionDenied is raised in register_project_content but not imported, which will cause a NameError when triggered.",
        "In content_detail the unlock POST branch checks form.is_valid() instead of the instantiated unlock_form, which will raise a NameError and bypass password validation.",
        "build_content_zip is not decorated with login_required or permission checks, allowing unauthenticated users to trigger zip creation for project content.",
        "content_success calls get_user_config on request.user without a login requirement; if accessed by an anonymous user it may error.",
        "Password attempt throttling (too_many_attempts) is commented out in content_detail, so authenticated users can brute-force protected content without rate limiting."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "content_list",
          "args_raw": [],
          "href_expr": "{% url 'content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the content that has been registered in the C-LARA social network.",
          "text": "Published content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Published content (external view)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "language_statistics",
          "args_raw": [],
          "href_expr": "{% url 'language_statistics' %}",
          "element": "a",
          "attr": "href",
          "title": "Show tables listing numbers of projects and pieces of content, broken down by language.",
          "text": "Project and content statistics",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.language_statistics"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "register_content",
          "args_raw": [],
          "href_expr": "{% url 'register_content' %}",
          "element": "a",
          "attr": "href",
          "title": "Register a piece of LARA content to make it accessible through the C-LARA social network.",
          "text": "Register external LARA content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.register_content"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "public_content_list",
          "args_raw": [],
          "href_expr": "{% url 'public_content_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Browse C-LARA and LARA content without logging in.",
          "text": "Content",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_views.public_content_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "offer_to_register_content_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'offer_to_register_content_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Register Rendered Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.content_views.offer_to_register_content_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 4828,
        "completion_tokens": 2100,
        "total_tokens": 6928,
        "estimated_cost_usd": 0.027034999999999997
      }
    },
    {
      "url_name": "remove_language_master",
      "callable": "clara_app.language_masters_views.remove_language_master",
      "module_repo_path": "clara_app/language_masters_views.py",
      "short_summary": "This module defines admin-restricted Django views for managing language master assignments and localisation bundles. It lets administrators add or remove LanguageMaster records and upload or load bundles of keytext pairs. The views use standard form handling, message feedback and template rendering with user configuration context.",
      "proposed_docstring": "Views in this module support administrative management of language masters and localisation bundles. It exposes admin-only endpoints to list, assign and remove LanguageMaster privileges, and to create, load or save bundles of localisation strings. The views validate input, coordinate updates to the associated models within transactions, surface success and error messages, and render the relevant templates with configuration data for display.",
      "key_responsibilities": [
        "List existing LanguageMaster records and process assignments via AssignLanguageMasterForm for administrators.",
        "Confirm and delete LanguageMaster privileges by primary key.",
        "Provide an interface to load existing LocalisationBundle contents into a form and to validate and save uploaded bundles of key/TAB/text lines.",
        "Render management and confirmation templates with user configuration and feedback messages."
      ],
      "potential_issues": [
        "Imports for user_can_translate, get_config, config, and logger are unused, which could indicate leftover or missing functionality.",
        "The localisation bundle save routine updates or creates items but does not delete bundle items removed from the uploaded data, so stale keys may persist.",
        "Access control assumes a userprofile with an is_admin attribute; missing or misconfigured profiles could raise errors.",
        "Retrieving 'clara_version' from get_user_config may fail if that configuration key is absent."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_language_masters",
          "args_raw": [],
          "href_expr": "{% url 'manage_language_masters' %}",
          "element": "a",
          "attr": "href",
          "title": "Give users 'language master' privileges, so that they can customise annotation prompts and edit phonetic lexicon data.",
          "text": "Manage language masters",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.manage_language_masters"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "post_localisation_bundle",
          "args_raw": [],
          "href_expr": "{% url 'post_localisation_bundle' %}",
          "element": "a",
          "attr": "href",
          "title": "Post a localisation bundle so that language masters can define translations",
          "text": "Post a localisation bundle",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.language_masters_views.post_localisation_bundle"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1544,
        "completion_tokens": 1364,
        "total_tokens": 2908,
        "estimated_cost_usd": 0.015569999999999999
      }
    },
    {
      "url_name": "remove_project_member",
      "callable": "clara_app.manipulate_project_views.remove_project_member",
      "module_repo_path": "clara_app/manipulate_project_views.py",
      "short_summary": "This module defines the project-related views: managing project members, listing projects a user has access to, deleting projects, showing project details, and displaying action history. Views are protected by login and project role/ownership decorators, and make use of forms and CLARAProjectInternal helpers to update and display project data. Rendering includes menus based on user configuration and CLARA version.",
      "proposed_docstring": "Django views for managing CLARA projects, including membership administration, listing and filtering a user's projects, rendering project detail and history pages, and deleting projects. These views enforce login and project-level permissions, use various forms to update project metadata, and rely on CLARAProjectInternal to surface available text versions, rendering capabilities, and cost information. Templates are rendered with context about project state, user roles, and UI configuration.",
      "key_responsibilities": [
        "Add and remove project members with specific roles using forms and owner-only access.",
        "List projects accessible to the current user with search filters and pagination, and annotate them with the user's role.",
        "Handle project deletion with confirmation and cleanup via CLARAProjectInternal.",
        "Render a project detail page showing available text versions, rendering capabilities, image flags, AI support, and allow updating title and image set options.",
        "Display the history of project actions for authorized users."
      ],
      "potential_issues": [
        "remove_project_member only requires login and does not enforce ownership or role checks, allowing any authenticated user to delete permissions if they know the ID.",
        "Determining the user's role in project_list uses ProjectPermissions.objects.get, which can raise exceptions if no matching permission exists or multiple exist; it also incurs N+1 queries.",
        "is_chinese_language is imported twice from different modules, potentially masking the intended implementation.",
        "Some CLARAProjectInternal calls and project deletions lack error handling, so failures could leave inconsistent state."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'simple_clara'"
          ],
          "href_expr": "{% url 'project_list' 'simple_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in, using Simple-C-LARA.",
          "text": "List my C-LARA projects using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_list",
          "args_raw": [
            "'full_clara'"
          ],
          "href_expr": "{% url 'project_list' 'full_clara' %}",
          "element": "a",
          "attr": "href",
          "title": "List all the projects you have created or have been assigned a role in.",
          "text": "List my C-LARA projects using Advanced C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.manipulate_project_views.project_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "project_history",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'project_history' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "View Project History",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.project_history"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_project_members",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'manage_project_members' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Manage Project Members",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.manage_project_members"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_project",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'delete_project' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Delete Project",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.manipulate_project_views.delete_project"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2385,
        "completion_tokens": 1749,
        "total_tokens": 4134,
        "estimated_cost_usd": 0.02047125
      }
    },
    {
      "url_name": "render_text_complete",
      "callable": "clara_app.rendering_views.render_text_complete",
      "module_repo_path": "clara_app/rendering_views.py",
      "short_summary": "This module orchestrates the rendering of CLARA project texts through Django views. It starts either normal or phonetic rendering jobs, delegates the heavy lifting to an asynchronous task, and provides polling and completion views to monitor progress. Audio source preferences and format/acknowledgement data are retrieved per project to drive rendering.",
      "proposed_docstring": "Views for kicking off and monitoring the rendering of CLARA project texts, either in normal or phonetic form. This module enforces access control, validates that requisite text versions exist, and prepares audio preferences before enqueueing a background rendering task via django-q. It provides endpoints to poll and display task progress, and a completion view to present results or errors, working with associated models and user configuration to tailor the rendering workflow.",
      "key_responsibilities": [
        "Validate project state and user roles before initiating text rendering, checking for required text versions.",
        "Determine human vs. TTS audio settings and collect format and acknowledgement preferences for the render.",
        "Enqueue asynchronous rendering tasks with callbacks and unique report IDs, handling internalisation errors gracefully.",
        "Expose JSON status polling for client-side monitoring and render monitor/complete templates based on task state."
      ],
      "potential_issues": [
        "The async rendering function accesses Django models and may raise unexpected exceptions; errors are only reported via task updates.",
        "In render_text_start_phonetic_or_normal, internalised_text is fetched but unused, suggesting side effects or exceptions are relied upon; failures may not be obvious.",
        "Using a local variable named 'messages' in render_text_status shadows django.contrib.messages, which could be confusing if extended.",
        "Self-contained rendering is hardcoded to True and zipfile_url is always None; downstream consumers may expect other behaviors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2347,
        "completion_tokens": 825,
        "total_tokens": 3172,
        "estimated_cost_usd": 0.011183750000000001
      }
    },
    {
      "url_name": "render_text_monitor",
      "callable": "clara_app.rendering_views.render_text_monitor",
      "module_repo_path": "clara_app/rendering_views.py",
      "short_summary": "This module orchestrates the rendering of CLARA project texts through Django views. It starts either normal or phonetic rendering jobs, delegates the heavy lifting to an asynchronous task, and provides polling and completion views to monitor progress. Audio source preferences and format/acknowledgement data are retrieved per project to drive rendering.",
      "proposed_docstring": "Views for kicking off and monitoring the rendering of CLARA project texts, either in normal or phonetic form. This module enforces access control, validates that requisite text versions exist, and prepares audio preferences before enqueueing a background rendering task via django-q. It provides endpoints to poll and display task progress, and a completion view to present results or errors, working with associated models and user configuration to tailor the rendering workflow.",
      "key_responsibilities": [
        "Validate project state and user roles before initiating text rendering, checking for required text versions.",
        "Determine human vs. TTS audio settings and collect format and acknowledgement preferences for the render.",
        "Enqueue asynchronous rendering tasks with callbacks and unique report IDs, handling internalisation errors gracefully.",
        "Expose JSON status polling for client-side monitoring and render monitor/complete templates based on task state."
      ],
      "potential_issues": [
        "The async rendering function accesses Django models and may raise unexpected exceptions; errors are only reported via task updates.",
        "In render_text_start_phonetic_or_normal, internalised_text is fetched but unused, suggesting side effects or exceptions are relied upon; failures may not be obvious.",
        "Using a local variable named 'messages' in render_text_status shadows django.contrib.messages, which could be confusing if extended.",
        "Self-contained rendering is hardcoded to True and zipfile_url is always None; downstream consumers may expect other behaviors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2347,
        "completion_tokens": 825,
        "total_tokens": 3172,
        "estimated_cost_usd": 0.011183750000000001
      }
    },
    {
      "url_name": "render_text_start_normal",
      "callable": "clara_app.rendering_views.render_text_start_normal",
      "module_repo_path": "clara_app/rendering_views.py",
      "short_summary": "This module orchestrates the rendering of CLARA project texts through Django views. It starts either normal or phonetic rendering jobs, delegates the heavy lifting to an asynchronous task, and provides polling and completion views to monitor progress. Audio source preferences and format/acknowledgement data are retrieved per project to drive rendering.",
      "proposed_docstring": "Views for kicking off and monitoring the rendering of CLARA project texts, either in normal or phonetic form. This module enforces access control, validates that requisite text versions exist, and prepares audio preferences before enqueueing a background rendering task via django-q. It provides endpoints to poll and display task progress, and a completion view to present results or errors, working with associated models and user configuration to tailor the rendering workflow.",
      "key_responsibilities": [
        "Validate project state and user roles before initiating text rendering, checking for required text versions.",
        "Determine human vs. TTS audio settings and collect format and acknowledgement preferences for the render.",
        "Enqueue asynchronous rendering tasks with callbacks and unique report IDs, handling internalisation errors gracefully.",
        "Expose JSON status polling for client-side monitoring and render monitor/complete templates based on task state."
      ],
      "potential_issues": [
        "The async rendering function accesses Django models and may raise unexpected exceptions; errors are only reported via task updates.",
        "In render_text_start_phonetic_or_normal, internalised_text is fetched but unused, suggesting side effects or exceptions are relied upon; failures may not be obvious.",
        "Using a local variable named 'messages' in render_text_status shadows django.contrib.messages, which could be confusing if extended.",
        "Self-contained rendering is hardcoded to True and zipfile_url is always None; downstream consumers may expect other behaviors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2347,
        "completion_tokens": 825,
        "total_tokens": 3172,
        "estimated_cost_usd": 0.011183750000000001
      }
    },
    {
      "url_name": "render_text_start_phonetic",
      "callable": "clara_app.rendering_views.render_text_start_phonetic",
      "module_repo_path": "clara_app/rendering_views.py",
      "short_summary": "This module orchestrates the rendering of CLARA project texts through Django views. It starts either normal or phonetic rendering jobs, delegates the heavy lifting to an asynchronous task, and provides polling and completion views to monitor progress. Audio source preferences and format/acknowledgement data are retrieved per project to drive rendering.",
      "proposed_docstring": "Views for kicking off and monitoring the rendering of CLARA project texts, either in normal or phonetic form. This module enforces access control, validates that requisite text versions exist, and prepares audio preferences before enqueueing a background rendering task via django-q. It provides endpoints to poll and display task progress, and a completion view to present results or errors, working with associated models and user configuration to tailor the rendering workflow.",
      "key_responsibilities": [
        "Validate project state and user roles before initiating text rendering, checking for required text versions.",
        "Determine human vs. TTS audio settings and collect format and acknowledgement preferences for the render.",
        "Enqueue asynchronous rendering tasks with callbacks and unique report IDs, handling internalisation errors gracefully.",
        "Expose JSON status polling for client-side monitoring and render monitor/complete templates based on task state."
      ],
      "potential_issues": [
        "The async rendering function accesses Django models and may raise unexpected exceptions; errors are only reported via task updates.",
        "In render_text_start_phonetic_or_normal, internalised_text is fetched but unused, suggesting side effects or exceptions are relied upon; failures may not be obvious.",
        "Using a local variable named 'messages' in render_text_status shadows django.contrib.messages, which could be confusing if extended.",
        "Self-contained rendering is hardcoded to True and zipfile_url is always None; downstream consumers may expect other behaviors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2347,
        "completion_tokens": 825,
        "total_tokens": 3172,
        "estimated_cost_usd": 0.011183750000000001
      }
    },
    {
      "url_name": "render_text_status",
      "callable": "clara_app.rendering_views.render_text_status",
      "module_repo_path": "clara_app/rendering_views.py",
      "short_summary": "This module orchestrates the rendering of CLARA project texts through Django views. It starts either normal or phonetic rendering jobs, delegates the heavy lifting to an asynchronous task, and provides polling and completion views to monitor progress. Audio source preferences and format/acknowledgement data are retrieved per project to drive rendering.",
      "proposed_docstring": "Views for kicking off and monitoring the rendering of CLARA project texts, either in normal or phonetic form. This module enforces access control, validates that requisite text versions exist, and prepares audio preferences before enqueueing a background rendering task via django-q. It provides endpoints to poll and display task progress, and a completion view to present results or errors, working with associated models and user configuration to tailor the rendering workflow.",
      "key_responsibilities": [
        "Validate project state and user roles before initiating text rendering, checking for required text versions.",
        "Determine human vs. TTS audio settings and collect format and acknowledgement preferences for the render.",
        "Enqueue asynchronous rendering tasks with callbacks and unique report IDs, handling internalisation errors gracefully.",
        "Expose JSON status polling for client-side monitoring and render monitor/complete templates based on task state."
      ],
      "potential_issues": [
        "The async rendering function accesses Django models and may raise unexpected exceptions; errors are only reported via task updates.",
        "In render_text_start_phonetic_or_normal, internalised_text is fetched but unused, suggesting side effects or exceptions are relied upon; failures may not be obvious.",
        "Using a local variable named 'messages' in render_text_status shadows django.contrib.messages, which could be confusing if extended.",
        "Self-contained rendering is hardcoded to True and zipfile_url is always None; downstream consumers may expect other behaviors."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_normal",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_normal' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_normal"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "render_text_start_phonetic",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'render_text_start_phonetic' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Render Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.rendering_views.render_text_start_phonetic"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2347,
        "completion_tokens": 825,
        "total_tokens": 3172,
        "estimated_cost_usd": 0.011183750000000001
      }
    },
    {
      "url_name": "restore_image",
      "callable": "clara_app.images_v1_views.restore_image",
      "module_repo_path": "clara_app/images_v1_views.py",
      "short_summary": "This module defines the image editing and generation views for CLARA projects. It prepares formsets with page texts and existing image records, handles saving and deletion, and triggers asynchronous OpenAI-based tasks to generate images, description variables, and request sequences. Status endpoints are provided for task monitoring, and archived images can be listed, restored, or deleted.",
      "proposed_docstring": "Views for managing project images, including editing existing image metadata, generating and understanding images via DALL-E/GPT, and handling description variables for coherent image sets. Provides workflows to collect page texts, present and validate image and description formsets, trigger asynchronous tasks for image generation, description extraction, and syntax correction, and render status monitors. Also includes endpoints to poll task updates and access or restore archived images.",
      "key_responsibilities": [
        "Render and process the image editing formset, including style image handling and description variable management.",
        "Trigger asynchronous tasks for DALL-E-3 image generation, GPT-4 based description extraction, and image request sequence creation, with status monitoring.",
        "Update and validate project page texts, falling back to async syntax correction if needed.",
        "Generate coherent image sets by chaining image-generation and image-understanding requests, storing results via CLARAProjectInternal.",
        "Provide endpoints to access, restore, or delete archived images through the ImageRepositoryORM."
      ],
      "potential_issues": [
        "HttpResponseNotAllowed is used in restore_image/delete_archive_image but not imported, which will cause a NameError on non-POST requests.",
        "Form handling relies on position/index alignment with initial_data; changes to ordering could misassociate uploads or page texts.",
        "Error handling around async tasks and OpenAI calls is minimal; exceptions may be swallowed or produce unclear user feedback.",
        "Direct indexing of page_texts by page-1 could raise out-of-range issues if page numbers are inconsistent with text lengths.",
        "Using style_description from a page-0 record assumes a specific ordering of initial_data that may not hold if upstream data changes."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_images",
          "args_raw": [
            "project.id",
            "'no_dall_e_3_image'"
          ],
          "href_expr": "{% url 'edit_images' project.id 'no_dall_e_3_image' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Edit Images and Pages",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.images_v1_views.edit_images"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 10936,
        "completion_tokens": 1395,
        "total_tokens": 12331,
        "estimated_cost_usd": 0.02762
      }
    },
    {
      "url_name": "review_funding_requests",
      "callable": "clara_app.funding_requests_views.review_funding_requests",
      "module_repo_path": "clara_app/funding_requests_views.py",
      "short_summary": "This module defines Django views for creating and processing funding requests within the C-LARA application. Authenticated users can submit new requests, while reviewers can filter and approve them, triggering an email confirmation step. Upon confirmation, the code updates request statuses, transfers credits between user profiles, and notifies requesters via email.",
      "proposed_docstring": "Views to handle the C-LARA funding workflow: allowing authenticated users to submit funding requests, enabling designated reviewers to search, review and approve requests, and confirming approvals with a emailed confirmation code before transferring credits. Reviewers can filter requests, allocate funds via a formset, and the module orchestrates email notifications and session storage of pending transfers, updating FundingRequest records and user balances upon confirmation.",
      "key_responsibilities": [
        "Render and process the funding request submission form for logged-in users",
        "Allow reviewers to filter funding requests and allocate credits via an approval formset",
        "Send confirmation emails to reviewers and handle confirmation code input to finalize approvals",
        "Update FundingRequest records, adjust user profile credit balances, and notify requesters of approvals"
      ],
      "potential_issues": [
        "Credit balance checks and transfers are not wrapped in a transaction and may be subject to race conditions or mid-process balance changes.",
        "Approval processing relies on form POST data without re-querying or validating the current status of each FundingRequest, which could allow tampering or approving already-processed requests.",
        "Credit assignments are cast to int, potentially dropping cents and causing rounding errors when dealing with Decimal fields.",
        "Initial formset status uses display labels from choices; if the ApproveFundingRequestFormSet expects raw status values, there may be mismatches between displayed and processed statuses.",
        "Email anonymization logic assumes email length and may produce odd results for short addresses."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "funding_request",
          "args_raw": [],
          "href_expr": "{% url 'funding_request' %}",
          "element": "a",
          "attr": "href",
          "title": "Submit a request to get a small amount of OpenAI credit",
          "text": "Funding request",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.funding_request"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "review_funding_requests",
          "args_raw": [],
          "href_expr": "{% url 'review_funding_requests' %}",
          "element": "a",
          "attr": "href",
          "title": "Review funding requests",
          "text": "Review funding requests",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.funding_requests_views.review_funding_requests"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1975,
        "completion_tokens": 1411,
        "total_tokens": 3386,
        "estimated_cost_usd": 0.01657875
      }
    },
    {
      "url_name": "satisfaction_questionnaire",
      "callable": "clara_app.satisfaction_questionnaire_views.satisfaction_questionnaire",
      "module_repo_path": "clara_app/satisfaction_questionnaire_views.py",
      "short_summary": "This module contains Django view functions for the satisfaction questionnaire workflow. Authenticated users can submit and update their own questionnaires for a project, and view questionnaires. Questionnaire reviewers can list, export to Excel, or delete responses. An aggregation view computes averaged ratings and distributions for reporting templates.",
      "proposed_docstring": "Views for handling satisfaction questionnaires associated with CLARA projects. This module provides endpoints for users to fill in or update their own questionnaire, view a submitted questionnaire, and for reviewers to manage responses, including exporting or deleting them. It also exposes an aggregation view that computes summary statistics and distributions of responses for reporting templates.",
      "key_responsibilities": [
        "Render and process the satisfaction questionnaire form for a given project and the current user, creating or updating their response.",
        "Display a read-only questionnaire response for a specified project/user pair.",
        "Provide a management interface for questionnaire reviewers to list, export all responses to an Excel file, or delete selected submissions.",
        "Aggregate questionnaire data (averages, distributions, recent free-text answers) and render them for reporting."
      ],
      "potential_issues": [
        "The aggregation view has no access control; any visitor could access aggregate results unless protected elsewhere.",
        "show_questionnaire allows any authenticated user to view any user's questionnaire if they know the IDs, which may be a privacy concern.",
        "manage_questionnaires relies on a u.userprofile attribute; if a User lacks a related profile, user_passes_test will raise an error.",
        "Excel export and aggregation over all responses could be memory intensive with a large dataset and lacks pagination or streaming.",
        "Timezone conversion is applied only to the created_at field in exports; other datetime fields may remain timezone-aware if present.",
        "config and logger are initialized but not used in this module."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "aggregated_questionnaire_results",
          "args_raw": [],
          "href_expr": "{% url 'aggregated_questionnaire_results' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for satisfaction questionnaires.",
          "text": "Questionnaire summary (projects)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.aggregated_questionnaire_results"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_questionnaires",
          "args_raw": [],
          "href_expr": "{% url 'manage_questionnaires' %}",
          "element": "a",
          "attr": "href",
          "title": "Review and possibly delete questionnaires",
          "text": "Review questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.manage_questionnaires"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "satisfaction_questionnaire",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'satisfaction_questionnaire' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Answer Satisfaction Questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.satisfaction_questionnaire_views.satisfaction_questionnaire"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1739,
        "completion_tokens": 895,
        "total_tokens": 2634,
        "estimated_cost_usd": 0.01112375
      }
    },
    {
      "url_name": "save_page_texts_multiple_monitor",
      "callable": "clara_app.save_page_texts_multiple_views.save_page_texts_multiple_monitor",
      "module_repo_path": "clara_app/save_page_texts_multiple_views.py",
      "short_summary": "This module provides two Django views to monitor saving page texts for multiple items within a project. One view returns JSON containing task messages and an inferred status for a given report ID, and the other renders a monitoring page with project and report context. Both views require a logged-in user with appropriate project role.",
      "proposed_docstring": "Defines views for monitoring the bulk \"save page texts\" process within a CLARA project. It exposes a JSON endpoint that polls task updates for a given report, inferring a simple status from those messages, and a monitor view that renders the monitoring template with project context. Access is restricted to authenticated users with a role on the project and relies on utils.get_task_updates to surface background task progress. The monitor view fetches the associated CLARAProject and passes project and report identifiers to the template for display.",
      "key_responsibilities": [
        "Provide a JSON status endpoint that polls get_task_updates for a given report and infers whether a background task has finished or errored",
        "Render the save_page_texts_multiple_monitor.html template with project and report context for monitoring purposes",
        "Enforce that users are authenticated and have a role on the referenced CLARAProject before accessing these views"
      ],
      "potential_issues": [
        "Status inference only checks for the substrings 'error' or 'finished' in messages; other states are treated as 'unknown'",
        "get_task_updates return type is assumed to support membership tests; unexpected types may lead to incorrect status detection",
        "Use of print statements for logging may not be appropriate in production and provides no structured logging",
        "Views accept any HTTP method unless restricted elsewhere, which may not be intended",
        "Messages are returned verbatim in JSON and could leak internal details if not sanitized"
      ],
      "ui_entrypoints": [],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 459,
        "completion_tokens": 1213,
        "total_tokens": 1672,
        "estimated_cost_usd": 0.012703750000000001
      }
    },
    {
      "url_name": "save_page_texts_multiple_status",
      "callable": "clara_app.save_page_texts_multiple_views.save_page_texts_multiple_status",
      "module_repo_path": "clara_app/save_page_texts_multiple_views.py",
      "short_summary": "This module provides two Django views to monitor saving page texts for multiple items within a project. One view returns JSON containing task messages and an inferred status for a given report ID, and the other renders a monitoring page with project and report context. Both views require a logged-in user with appropriate project role.",
      "proposed_docstring": "Defines views for monitoring the bulk \"save page texts\" process within a CLARA project. It exposes a JSON endpoint that polls task updates for a given report, inferring a simple status from those messages, and a monitor view that renders the monitoring template with project context. Access is restricted to authenticated users with a role on the project and relies on utils.get_task_updates to surface background task progress. The monitor view fetches the associated CLARAProject and passes project and report identifiers to the template for display.",
      "key_responsibilities": [
        "Provide a JSON status endpoint that polls get_task_updates for a given report and infers whether a background task has finished or errored",
        "Render the save_page_texts_multiple_monitor.html template with project and report context for monitoring purposes",
        "Enforce that users are authenticated and have a role on the referenced CLARAProject before accessing these views"
      ],
      "potential_issues": [
        "Status inference only checks for the substrings 'error' or 'finished' in messages; other states are treated as 'unknown'",
        "get_task_updates return type is assumed to support membership tests; unexpected types may lead to incorrect status detection",
        "Use of print statements for logging may not be appropriate in production and provides no structured logging",
        "Views accept any HTTP method unless restricted elsewhere, which may not be intended",
        "Messages are returned verbatim in JSON and could leak internal details if not sanitized"
      ],
      "ui_entrypoints": [],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 459,
        "completion_tokens": 1213,
        "total_tokens": 1672,
        "estimated_cost_usd": 0.012703750000000001
      }
    },
    {
      "url_name": "serve_audio_file",
      "callable": "clara_app.serving_content_views.serve_audio_file",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_clara_image",
      "callable": "clara_app.serving_content_views.serve_clara_image",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_coherent_images_v2_file",
      "callable": "clara_app.serving_content_views.serve_coherent_images_v2_file",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_coherent_images_v2_overview",
      "callable": "clara_app.serving_content_views.serve_coherent_images_v2_overview",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_export_zipfile",
      "callable": "clara_app.serving_content_views.serve_export_zipfile",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_project_image",
      "callable": "clara_app.serving_content_views.serve_project_image",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_rendered_text",
      "callable": "clara_app.serving_content_views.serve_rendered_text",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "serve_zipfile",
      "callable": "clara_app.serving_content_views.serve_zipfile",
      "module_repo_path": "clara_app/serving_content_views.py",
      "short_summary": "This module exposes a collection of Django view functions that serve generated CLARA project assets directly over HTTP. It builds file paths from CLARA project IDs and metadata, retrieves content from local storage or S3, and returns appropriate HttpResponse/FileResponse objects. Several endpoints handle rendered texts, images, audio, and downloadable zip archives, with basic access control on sensitive resources.",
      "proposed_docstring": "Django views for serving CLARA-generated content and assets such as rendered HTML, coherent image overviews, zip exports, project images, and audio files from the filesystem or S3. Paths are resolved via CLARA project metadata and utility helpers, MIME types are guessed, and responses are returned directly without templating. Some endpoints require authentication and are configured for safe iframe embedding, with simple existence checks raising 404s on missing content. Includes support for downloadable zip archives of project output and exported content.",
      "key_responsibilities": [
        "Serve rendered CLARA text, static, and multimedia files with proper MIME types and same-origin iframe allowance",
        "Provide download endpoints for project content zip files and export archives, optionally protecting them with login_required",
        "Serve project and CLARA images, coherent images overviews, and individual coherent image files with path resolution and traversal checks",
        "Expose audio file retrieval from the configured audio repository with optional S3-backed storage"
      ],
      "potential_issues": [
        "Presigned S3 URL branch in serve_export_zipfile references undefined _s3_client/_s3_bucket_name and is noted as non-functional",
        "serve_zipfile catches exceptions but raises Http404(\"error_message\") literal instead of the constructed error message",
        "File handles are opened without context managers in several views, which may leak descriptors under load",
        "Most file-serving views lack authentication and may expose generated content publicly",
        "Dual unquote imports (django.utils.http and urllib.parse) may be unintended and the former is shadowed"
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "serve_rendered_text",
          "args_raw": [
            "project.id",
            "'normal'",
            "'page_1.html'"
          ],
          "href_expr": "{% url 'serve_rendered_text' project.id 'normal' 'page_1.html' %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Display Rendered Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.serving_content_views.serve_rendered_text"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2206,
        "completion_tokens": 2379,
        "total_tokens": 4585,
        "estimated_cost_usd": 0.026547499999999998
      }
    },
    {
      "url_name": "set_content_password",
      "callable": "clara_app.content_password_views.set_content_password",
      "module_repo_path": "clara_app/content_password_views.py",
      "short_summary": "This module implements Django views to list and update passwords on content tied to projects the current user owns. It renders a management page showing protected content and per-item forms, and provides POST handlers to set/change or clear a content password. Access is enforced via an owner assertion and feedback is communicated through Django's messages framework.",
      "proposed_docstring": "Views for managing password protection on Content objects owned by a user. Provides an owner check helper and three entry points: a listing page of protected content with per-row update forms, and POST handlers to set/change or clear a password and hint. Interacts with the Content and CLARAProject models, a ContentPasswordUpdateForm, and uses Django messages and templates to render feedback and redirect to the management page.",
      "key_responsibilities": [
        "Filter and render password-protected Content items for projects owned by the requesting user.",
        "Instantiate and pass ContentPasswordUpdateForm instances to the management template for each item.",
        "Handle POST requests to clear an existing content password after asserting ownership.",
        "Handle POST requests to set or change a content password and hint, treating empty input as a clear operation and persisting changes with appropriate success messages."
      ],
      "potential_issues": [
        "Protected content filtering excludes only NULL password hashes; records with empty strings may still appear unexpectedly.",
        "The type hint on `_assert_owner` suggests `CLARAProjectInternal` but is passed a `Content.project`, which could be confusing if types diverge.",
        "Unused import of `timezone` and commented out rate limiting hints at missing brute-force protection or incomplete cleanup.",
        "Only project owners are allowed; if other roles should manage passwords this check would need adjustment."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_content_passwords",
          "args_raw": [],
          "href_expr": "{% url 'manage_content_passwords' %}",
          "element": "a",
          "attr": "href",
          "title": "Change or remove passwords on content where you have set them.",
          "text": "Change/remove content passwords",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.content_password_views.manage_content_passwords"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1000,
        "completion_tokens": 1452,
        "total_tokens": 2452,
        "estimated_cost_usd": 0.01577
      }
    },
    {
      "url_name": "set_format_preferences",
      "callable": "clara_app.annotation_views.set_format_preferences",
      "module_repo_path": "clara_app/annotation_views.py",
      "short_summary": "Views for creating and maintaining multiple annotated text versions for CLARA projects. They render the correct form/template per version, handle manual edits, archived loads, and AI- or tagger-driven generation, correction and improvement, often via asynchronous tasks. The module also offers endpoints to monitor task status and views for acknowledgements and format preference configuration.",
      "proposed_docstring": "This module defines the Django views used to create, edit, annotate and improve the various text versions within a CLARA project, including plain text, titles, segmentation, glossing, lemmatisation and related variants. It wires up the appropriate forms and templates for each text type, enforces permissions, and invokes synchronous or asynchronous operations (including AI-backed generation, correction and improvement tasks) via the CLARAProjectInternal API, persisting results and logging actions. It exposes endpoints to poll and monitor long-running generation tasks, supports loading archived versions, and handles auxiliary project settings such as acknowledgements and formatting preferences. Long-running tasks are scheduled with django-q and progress is reported back to the client through JSON and dedicated monitor views.",
      "key_responsibilities": [
        "Render and process forms to create, edit, delete or load archived versions of different text annotations (plain, title, segmented, gloss, lemma, MWE, pinyin, etc.) for a project.",
        "Trigger AI-backed generation, correction and improvement tasks asynchronously using django-q, and persist API call metadata and project actions.",
        "Provide JSON and HTML endpoints to poll and monitor the status of long-running generation/improvement tasks.",
        "Validate and internalise annotated text input, including MWE consistency checks, before saving.",
        "Handle ancillary project settings views such as acknowledgements and format preferences."
      ],
      "potential_issues": [
        "In create_annotated_text_of_right_type, the generic Exception handler re-raises the exception before attempting to add an error message, making the message unreachable and potentially crashing the view.",
        "The local variable name 'messages' in generate_text_status shadows django.contrib.messages and may be confusing; status detection relies on simple substring membership in the updates list without distinguishing running states.",
        "Loading archived files trusts the archived file path from form input; if not validated, this may allow attempts to read unexpected files.",
        "Error handling for asynchronous tasks posts updates but suppresses exceptions, which may make debugging failures harder; task status is limited to 'finished' or 'error' with 'unknown' otherwise.",
        "Multiple imports of is_chinese_language and is_rtl_language from different modules may cause confusion about which implementation is used."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_plain_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_plain_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Plain Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_plain_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Text Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_summary",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_summary' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Summary",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_summary"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_cefr_level",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_cefr_level' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Estimate/Edit CEFR Level",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_cefr_level"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_segmented_title",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_segmented_title' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Segmented Title",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_segmented_title"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_translated_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_translated_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Translated Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_translated_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_mwe_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_mwe_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit MWE-tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_mwe_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_phonetic_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_phonetic_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Phonetic Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_phonetic_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_lemma_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_lemma_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Lemma Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_lemma_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_glossed_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_glossed_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Glossed Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_glossed_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "create_pinyin_tagged_text",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'create_pinyin_tagged_text' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Create/Edit Pinyin Tagged Text",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.create_pinyin_tagged_text"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "set_format_preferences",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'set_format_preferences' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Set Format Preferences",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.set_format_preferences"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "edit_acknowledgements",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'edit_acknowledgements' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Acknowledgements",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.annotation_views.edit_acknowledgements"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 8646,
        "completion_tokens": 1377,
        "total_tokens": 10023,
        "estimated_cost_usd": 0.0245775
      }
    },
    {
      "url_name": "show_questionnaire",
      "callable": "clara_app.satisfaction_questionnaire_views.show_questionnaire",
      "module_repo_path": "clara_app/satisfaction_questionnaire_views.py",
      "short_summary": "This module contains Django view functions for the satisfaction questionnaire workflow. Authenticated users can submit and update their own questionnaires for a project, and view questionnaires. Questionnaire reviewers can list, export to Excel, or delete responses. An aggregation view computes averaged ratings and distributions for reporting templates.",
      "proposed_docstring": "Views for handling satisfaction questionnaires associated with CLARA projects. This module provides endpoints for users to fill in or update their own questionnaire, view a submitted questionnaire, and for reviewers to manage responses, including exporting or deleting them. It also exposes an aggregation view that computes summary statistics and distributions of responses for reporting templates.",
      "key_responsibilities": [
        "Render and process the satisfaction questionnaire form for a given project and the current user, creating or updating their response.",
        "Display a read-only questionnaire response for a specified project/user pair.",
        "Provide a management interface for questionnaire reviewers to list, export all responses to an Excel file, or delete selected submissions.",
        "Aggregate questionnaire data (averages, distributions, recent free-text answers) and render them for reporting."
      ],
      "potential_issues": [
        "The aggregation view has no access control; any visitor could access aggregate results unless protected elsewhere.",
        "show_questionnaire allows any authenticated user to view any user's questionnaire if they know the IDs, which may be a privacy concern.",
        "manage_questionnaires relies on a u.userprofile attribute; if a User lacks a related profile, user_passes_test will raise an error.",
        "Excel export and aggregation over all responses could be memory intensive with a large dataset and lacks pagination or streaming.",
        "Timezone conversion is applied only to the created_at field in exports; other datetime fields may remain timezone-aware if present.",
        "config and logger are initialized but not used in this module."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "aggregated_questionnaire_results",
          "args_raw": [],
          "href_expr": "{% url 'aggregated_questionnaire_results' %}",
          "element": "a",
          "attr": "href",
          "title": "Show summary results for satisfaction questionnaires.",
          "text": "Questionnaire summary (projects)",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.aggregated_questionnaire_results"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "manage_questionnaires",
          "args_raw": [],
          "href_expr": "{% url 'manage_questionnaires' %}",
          "element": "a",
          "attr": "href",
          "title": "Review and possibly delete questionnaires",
          "text": "Review questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.satisfaction_questionnaire_views.manage_questionnaires"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "satisfaction_questionnaire",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'satisfaction_questionnaire' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Answer Satisfaction Questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.satisfaction_questionnaire_views.satisfaction_questionnaire"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1739,
        "completion_tokens": 895,
        "total_tokens": 2634,
        "estimated_cost_usd": 0.01112375
      }
    },
    {
      "url_name": "simple_clara",
      "callable": "clara_app.simple_clara_views.simple_clara",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "simple_clara_monitor",
      "callable": "clara_app.simple_clara_views.simple_clara_monitor",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "simple_clara_review_v2_images_for_element",
      "callable": "clara_app.simple_clara_views.simple_clara_review_v2_images_for_element",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "simple_clara_review_v2_images_for_page",
      "callable": "clara_app.simple_clara_views.simple_clara_review_v2_images_for_page",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "simple_clara_review_v2_images_for_style",
      "callable": "clara_app.simple_clara_views.simple_clara_review_v2_images_for_style",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "simple_clara_status",
      "callable": "clara_app.simple_clara_views.simple_clara_status",
      "module_repo_path": "clara_app/simple_clara_views.py",
      "short_summary": "This module powers the Simple C-LARA wizard: it renders the main form, detects available project resources, and dispatches user actions to create text, images, segmentation, rendering, and posting. Cheap actions run inline while expensive AI/image steps are enqueued to django-q, with status polling and monitor views. It also provides review interfaces for coherent images (pages, elements, styles) supporting community feedback, uploads, and votes.",
      "proposed_docstring": "High-level views and helpers for the Simple C-LARA one-page wizard. This module inspects a CLARA projects current resources, renders the simplified authoring form, and interprets user actions to drive text creation, segmentation, rendering, TTS preferences, posting, and image workflows (including coherent image V2 review). It dispatches cheap actions synchronously and heavy operations to django-q background tasks, exposing monitoring/polling endpoints for progress. It wraps CLARAProjectInternal methods, tracks API usage/costs, and integrates community image feedback interfaces for pages, elements, and styles.",
      "key_responsibilities": [
        "Inspect and summarize the current state of a CLARA project (texts, images, rendering, posting, TTS) for display in the wizard form.",
        "Handle the main Simple C-LARA view, mapping form actions to action dictionaries and executing them synchronously or via django-q tasks.",
        "Dispatch Simple C-LARA actions to helper functions that wrap CLARAProjectInternal operations, recording API calls and posting progress updates.",
        "Expose polling and monitor endpoints for long-running tasks and community feedback-driven image generation/review workflows.",
        "Provide page/element/style image review views with AI generation, uploads, voting, and promotion of preferred variants."
      ],
      "potential_issues": [
        "The decorator on execute_simple_clara_style_requests_monitor is missing '@login_required', so the view is not protected and the name `login_required` is left unused.",
        "Credit/key checks are only applied in some views; certain AI-dependent paths in review views might proceed without adequate authorization or balance checks.",
        "get_simple_clara_resources_helper returns a dict with an 'error' key instead of raising, but consumers assume 'status' exists; an error could cause KeyError downstream.",
        "create_v2_style_helper ignores the up_to_date_dict guard (commented out) and will recreate style assets even if already up to date.",
        "Redirect targets for errors/initial state are inconsistent (e.g., 'initial' vs 'init'), potentially causing broken navigation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "simple_clara",
          "args_raw": [
            "0",
            "'initial'"
          ],
          "href_expr": "{% url 'simple_clara' 0 'initial' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a new C-LARA project using Simple-C-LARA.",
          "text": "Create new C-LARA project using Simple-C-LARA",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.simple_clara_views.simple_clara"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 19492,
        "completion_tokens": 1014,
        "total_tokens": 20506,
        "estimated_cost_usd": 0.034504999999999994
      }
    },
    {
      "url_name": "start_bulk_source_exports",
      "callable": "clara_app.export_zipfile_views.start_bulk_source_exports",
      "module_repo_path": "clara_app/export_zipfile_views.py",
      "short_summary": "This module implements Django views to export C-LARA projects and audio into zipfiles or directory trees. It orchestrates asynchronous tasks via django-q, provides polling endpoints for progress, and renders monitor and completion pages. Single-project exports are guarded by project membership, while bulk source and audio exports are admin-only and write manifests and indices to filesystem paths.",
      "proposed_docstring": "Views for packaging C-LARA content into portable bundles. Exposes UI endpoints to launch asynchronous exports of a single project zip, bulk source zips, and bulk audio repositories, with monitoring and completion pages. Uses Django-Q tasks to perform the work, reporting progress via task updates polled by JSON status endpoints, and renders templates for start, monitor, and completion workflows. Access is restricted to project members for single-project exports and to admins for bulk operations, with optional S3 presigned URL support when serving generated zipfiles.",
      "key_responsibilities": [
        "Start, monitor, and complete asynchronous creation of a single project export zipfile, including optional S3 download links.",
        "Admin-only bulk export of all project source zips with metadata, index, and failure reporting to a destination root.",
        "Admin-only bulk export of audio repository content grouped by engine/language/voice, producing manifests, indices, and failure logs.",
        "Expose JSON status endpoints that poll task update records and render associated monitoring and completion templates."
      ],
      "potential_issues": [
        "Status detection for bulk exports treats any message containing the substring \"error\" as a failure; messages like \"finished with N errors\" will force an error state and other incidental occurrences could misclassify status.",
        "bulk_audio_export_complete assumes the output root at $CLARA/tmp/bulk_audio_exports regardless of configuration; if the CLARA environment variable is unset or a different output path is desired, the view may not find results.",
        "_clear_dir ignores cleanup errors silently, so stale files or partial deletions may go unnoticed before writing new exports.",
        "Destination roots or filenames containing unusual characters may not round-trip cleanly through URL parameters when passing dest_root to monitor/complete views."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "start_bulk_source_exports",
          "args_raw": [],
          "href_expr": "{% url 'start_bulk_source_exports' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing zips of all projects plus metadata.",
          "text": "Prepare zipfiles of all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_source_exports"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "bulk_audio_export_start",
          "args_raw": [],
          "href_expr": "{% url 'bulk_audio_export_start' %}",
          "element": "a",
          "attr": "href",
          "title": "Create a directory containing all audio plus metadata.",
          "text": "Prepare downloadable directory of audio for all projects",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.export_zipfile_views.start_bulk_audio_export"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "make_export_zipfile",
          "args_raw": [
            "project.id"
          ],
          "href_expr": "{% url 'make_export_zipfile' project.id %}",
          "element": "a",
          "attr": "href",
          "title": null,
          "text": "Export zipfile",
          "template_repo_path": "clara_app/templates/clara_app/project_detail.html",
          "callable": "clara_app.export_zipfile_views.make_export_zipfile"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 5529,
        "completion_tokens": 1924,
        "total_tokens": 7453,
        "estimated_cost_usd": 0.02615125
      }
    },
    {
      "url_name": "tq_create",
      "callable": "clara_app.text_questionnaire_views.tq_create",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_delete",
      "callable": "clara_app.text_questionnaire_views.tq_delete",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_edit",
      "callable": "clara_app.text_questionnaire_views.tq_edit",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_export_csv",
      "callable": "clara_app.text_questionnaire_views.tq_export_csv",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_export_csv_raw",
      "callable": "clara_app.text_questionnaire_views.tq_export_csv_raw",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_fill",
      "callable": "clara_app.text_questionnaire_views.tq_fill",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_my_list",
      "callable": "clara_app.text_questionnaire_views.tq_my_list",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_public_list",
      "callable": "clara_app.text_questionnaire_views.tq_public_list",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_remove",
      "callable": "clara_app.text_questionnaire_views.tq_remove",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_results",
      "callable": "clara_app.text_questionnaire_views.tq_results",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "tq_skimlist",
      "callable": "clara_app.text_questionnaire_views.tq_skimlist",
      "module_repo_path": "clara_app/text_questionnaire_views.py",
      "short_summary": "This module implements the views around text questionnaires: owners can create/edit questionnaires, link books, and manage questions, while evaluators can browse assigned books, fill per-page and whole-book Likert questions, and track progress. It renders intro/page/book phases, computes completion, and records answers. Owners can view aggregated results and export CSV/ZIP data. Helpers render book pickers, sync links/questions, and ensure rendered page assets exist for per-page questions.",
      "proposed_docstring": "Views for creating, editing, filling, and analysing text questionnaires tied to book content. This module handles questionnaire lifecycle (owner-facing creation, linking books and questions), evaluator flows for per-page and whole-book Likert responses (with anonymous user support), and renders progress, results, and CSV/ZIP exports. It also provides helper routines to synchronise linked books/questions, ensure rendered page assets exist, and compute aggregated statistics for results pages.",
      "key_responsibilities": [
        "Render and process forms to create and edit questionnaires, link books, and define per-book and per-page questions.",
        "Provide evaluator-facing views to list assigned books, fill per-page and whole-book Likert questions, handle anonymous users, and track granular progress.",
        "Ensure rendered page assets for questionnaires exist via CLARAProjectInternal utilities and load per-page HTML/image snippets.",
        "Render owner-facing results pages with aggregated statistics/matrices and support exporting aggregated and raw CSV/ZIP data.",
        "Utility functions to synchronise linked books and questions, render paginated book picker partials, and parse per-page question text."
      ],
      "potential_issues": [
        "traceback and now are referenced in error handling/helper code but not imported, which will raise NameError on exceptions or when filtering by time period in the book picker.",
        "There are two definitions of _sync_questions; the latter shadows the former and deletes only book-scope questions, which may be unintended or confusing.",
        "tq_export_csv and other views allow admin via userprofile checks but tq_results restricts strictly to owners; access control may be inconsistent.",
        "tq_fill assumes a project exists on the linked book or its content; missing project associations will break per-page phase.",
        "ensure_q_pages_ready/load_q_page_assets rely on external rendering utilities; failures are caught only broadly and may mask underlying issues, with printed debug statements left in production."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_create",
          "args_raw": [],
          "href_expr": "{% url 'tq_create' %}",
          "element": "a",
          "attr": "href",
          "title": "Create and post a new text questionnaire",
          "text": "Create text questionnaire",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_create"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_my_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_my_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Find posted text questionnaires",
          "text": "My text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_my_list"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "tq_public_list",
          "args_raw": [],
          "href_expr": "{% url 'tq_public_list' %}",
          "element": "a",
          "attr": "href",
          "title": "Edit text questionnaires I have created",
          "text": "Find posted text questionnaires",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.text_questionnaire_views.tq_public_list"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 9348,
        "completion_tokens": 759,
        "total_tokens": 10107,
        "estimated_cost_usd": 0.019275
      }
    },
    {
      "url_name": "transfer_credit",
      "callable": "clara_app.credit_views.transfer_credit",
      "module_repo_path": "clara_app/credit_views.py",
      "short_summary": "This module defines Django views for displaying and manipulating user credit balances. It supports administrators adding credit to accounts and logged-in users transferring credit to others. Transfers are staged in the session and require a confirmation code sent via email before balances are updated, with templates rendered including Clara version context.",
      "proposed_docstring": "Views for managing the C-LARA credit system, providing balance display, admin credit additions, and user-to-user transfers with confirmation. Forms and Django messages are used to collect and validate input, update user profile credit fields, and render templates with configuration such as the current Clara version. Pending transfers are stored in the session and finalized only after the user enters a confirmation code received by email.",
      "key_responsibilities": [
        "Display the logged-in user's current credit balance alongside the Clara version.",
        "Allow admin users to add credit to any user's profile via an AddCreditForm.",
        "Handle initiation of credit transfers by validating recipients and funds, storing pending transfer details in the session, and emailing a confirmation code.",
        "Confirm pending transfers by validating a submitted code, adjusting sender and recipient credits, and providing user feedback via messages."
      ],
      "potential_issues": [
        "Inconsistent handling of the AddCreditForm's 'user' field: in one view it's treated as a User instance, in another as a username string, which may lead to lookup errors.",
        "Some error render paths omit the 'clara_version' context or use a different template path (e.g. 'confirm_transfer.html' vs 'clara_app/confirm_transfer.html'), which could break templates.",
        "No validation against transferring negative amounts or transferring to oneself, and no recheck of available balance at confirmation time.",
        "Email anonymization assumes a minimum length and may fail or produce odd results for short email addresses; sending confirmation uses the sender's email, which might be empty or invalid.",
        "Session-based staging of transfers lacks expiry handling and could be susceptible to concurrent balance changes before confirmation."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "add_credit",
          "args_raw": [],
          "href_expr": "{% url 'add_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Add credit to a user's GPT-4 call account",
          "text": "Add credit to user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.add_credit"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "credit_balance",
          "args_raw": [],
          "href_expr": "{% url 'credit_balance' %}",
          "element": "a",
          "attr": "href",
          "title": "C-LARA is free, except that calls to GPT-4 cost money. Show how much you have left on your account.",
          "text": "Credit balance for ChatGPT-4 API calls",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.credit_balance"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "transfer_credit",
          "args_raw": [],
          "href_expr": "{% url 'transfer_credit' %}",
          "element": "a",
          "attr": "href",
          "title": "Transfer some of the credit from your GPT-4 call account to another user.",
          "text": "Transfer credit to another user",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.credit_views.transfer_credit"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 1266,
        "completion_tokens": 1575,
        "total_tokens": 2841,
        "estimated_cost_usd": 0.0173325
      }
    },
    {
      "url_name": "update_feed",
      "callable": "clara_app.update_feed_views.update_feed",
      "module_repo_path": "clara_app/update_feed_views.py",
      "short_summary": "This module exposes a login-protected view that assembles and renders a feed of recent updates for the current user and their friends. It queries Update records, validates them against expected model types, and passes the filtered list to the 'clara_app/update_feed.html' template along with the user's configuration. A helper ensures only updates with renderable content are included.",
      "proposed_docstring": "Views for rendering a user's activity feed, showing recent updates made by the user and their friends. Retrieves recent Update records, filters them for expected types, and renders them into the update feed template along with configuration like the Clara version. Includes validation logic to ensure only updates with compatible content objects are passed to the template.",
      "key_responsibilities": [
        "Provide the update_feed view to display a user's own and friends' recent updates.",
        "Query and order recent Update objects, limiting to the latest 50 entries.",
        "Filter updates through valid_update_for_update_feed to ensure they have the expected related model instances before rendering.",
        "Retrieve user-specific configuration (e.g., Clara version) and pass context to the update feed template."
      ],
      "potential_issues": [
        "The PUBLISH case in valid_update_for_update_feed checks that content_object is both Comment and Content, which is impossible and likely a bug; it probably should check Content instead of Comment.",
        "Warnings for invalid updates are printed to stdout rather than logged, and are silently filtered out, which may hide underlying data issues.",
        "The module defines a config variable and logger but does not use them, suggesting incomplete or stale code.",
        "If get_user_config or current_friends_of_user fails or performs expensive queries, the feed view may error or be slow without handling."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "update_feed",
          "args_raw": [],
          "href_expr": "{% url 'update_feed' %}",
          "element": "a",
          "attr": "href",
          "title": "Get a summary of recent C-LARA activity from you and your friends.",
          "text": "Update feed",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.update_feed_views.update_feed"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 695,
        "completion_tokens": 1204,
        "total_tokens": 1899,
        "estimated_cost_usd": 0.01290875
      }
    },
    {
      "url_name": "update_reading_history_monitor",
      "callable": "clara_app.reading_histories_views.update_reading_history_monitor",
      "module_repo_path": "clara_app/reading_histories_views.py",
      "short_summary": "This module implements the UI and workflow around user reading histories, keyed by L2 language. It handles displaying and modifying a reading history, creating backing CLARA projects, and invoking background tasks to append projects and recompile combined texts. It also provides status endpoints and helper functions to determine eligible languages and projects based on stored content and phonetic resource availability.",
      "proposed_docstring": "Django views to manage a user's reading history per L2, including creation of associated CLARA projects, listing and removing items, toggling phonetic preferences, and adding new projects asynchronously. Exposes endpoints to kick off background compilation of a combined reading history, poll its status, and render monitoring pages, while populating templates with available languages, projects, and configuration. Helper routines enumerate L2 languages and projects with saved internalised text suitable for inclusion. Integrates closely with CLARAProjectInternal/ReadingHistoryInternal to render combined texts, including phonetic variants when requested.",
      "key_responsibilities": [
        "Render and process the reading_history view to select L2, delete histories, toggle phonetic text preference, and add projects to a history.",
        "Create associated CLARAProject and internal representations for a new reading history and check for rendered HTML availability.",
        "Kick off and monitor asynchronous update_reading_history tasks that combine component CLARA projects into a compiled reading history, with optional phonetic rendering.",
        "Expose JSON status polling via update_reading_history_status and a monitoring page that uses JavaScript to poll task progress.",
        "Enumerate available L2s and CLARA projects that have posted content and saved internalised texts for inclusion in a reading history."
      ],
      "potential_issues": [
        "The asynchronous task update_reading_history receives Django model instances and custom classes; depending on django_q serialization, passing these objects may lead to pickling or stale-state issues.",
        "Using get_object_or_404 in a background task may raise Http404 outside a request/response context; a simple get() with proper error handling may be more appropriate.",
        "Variable shadowing of the imported messages module in update_reading_history_status could be confusing, though contained within the function.",
        "If reading_history exists without an associated project (e.g. inconsistent data), access to reading_history.project will fail; deletion does not handle cleanup of rendered HTML beyond the current internal object.",
        "POST paths that do not hit a return may lead to undefined form/context variables before rendering; current logic assumes all POST branches redirect."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "reading_history",
          "args_raw": [
            "'english'",
            "'init'"
          ],
          "href_expr": "{% url 'reading_history' 'english' 'init' %}",
          "element": "a",
          "attr": "href",
          "title": "Access your reading history for a given language, or add a new project to it.",
          "text": "Reading histories",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.reading_histories_views.reading_history"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2873,
        "completion_tokens": 2126,
        "total_tokens": 4999,
        "estimated_cost_usd": 0.02485125
      }
    },
    {
      "url_name": "update_reading_history_status",
      "callable": "clara_app.reading_histories_views.update_reading_history_status",
      "module_repo_path": "clara_app/reading_histories_views.py",
      "short_summary": "This module implements the UI and workflow around user reading histories, keyed by L2 language. It handles displaying and modifying a reading history, creating backing CLARA projects, and invoking background tasks to append projects and recompile combined texts. It also provides status endpoints and helper functions to determine eligible languages and projects based on stored content and phonetic resource availability.",
      "proposed_docstring": "Django views to manage a user's reading history per L2, including creation of associated CLARA projects, listing and removing items, toggling phonetic preferences, and adding new projects asynchronously. Exposes endpoints to kick off background compilation of a combined reading history, poll its status, and render monitoring pages, while populating templates with available languages, projects, and configuration. Helper routines enumerate L2 languages and projects with saved internalised text suitable for inclusion. Integrates closely with CLARAProjectInternal/ReadingHistoryInternal to render combined texts, including phonetic variants when requested.",
      "key_responsibilities": [
        "Render and process the reading_history view to select L2, delete histories, toggle phonetic text preference, and add projects to a history.",
        "Create associated CLARAProject and internal representations for a new reading history and check for rendered HTML availability.",
        "Kick off and monitor asynchronous update_reading_history tasks that combine component CLARA projects into a compiled reading history, with optional phonetic rendering.",
        "Expose JSON status polling via update_reading_history_status and a monitoring page that uses JavaScript to poll task progress.",
        "Enumerate available L2s and CLARA projects that have posted content and saved internalised texts for inclusion in a reading history."
      ],
      "potential_issues": [
        "The asynchronous task update_reading_history receives Django model instances and custom classes; depending on django_q serialization, passing these objects may lead to pickling or stale-state issues.",
        "Using get_object_or_404 in a background task may raise Http404 outside a request/response context; a simple get() with proper error handling may be more appropriate.",
        "Variable shadowing of the imported messages module in update_reading_history_status could be confusing, though contained within the function.",
        "If reading_history exists without an associated project (e.g. inconsistent data), access to reading_history.project will fail; deletion does not handle cleanup of rendered HTML beyond the current internal object.",
        "POST paths that do not hit a return may lead to undefined form/context variables before rendering; current logic assumes all POST branches redirect."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "reading_history",
          "args_raw": [
            "'english'",
            "'init'"
          ],
          "href_expr": "{% url 'reading_history' 'english' 'init' %}",
          "element": "a",
          "attr": "href",
          "title": "Access your reading history for a given language, or add a new project to it.",
          "text": "Reading histories",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.reading_histories_views.reading_history"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 2873,
        "completion_tokens": 2126,
        "total_tokens": 4999,
        "estimated_cost_usd": 0.02485125
      }
    },
    {
      "url_name": "user_config",
      "callable": "clara_app.user_config_views.user_config",
      "module_repo_path": "clara_app/user_config_views.py",
      "short_summary": "This module defines the user configuration view, allowing authenticated users to create or update their configuration settings via a form. It ensures a configuration record exists, validates and saves changes on POST, and renders the configuration page with contextual data such as the Clara version.",
      "proposed_docstring": "Views for displaying and updating a user's configuration settings. This module currently exposes a login-protected view that ensures a UserConfiguration object exists for the authenticated user, binds form data for updates, persists changes, and displays success messages. It pulls auxiliary configuration data such as the Clara version to render into the user configuration template.",
      "key_responsibilities": [
        "Expose a login-required view for managing user configuration settings.",
        "Ensure a UserConfiguration model instance exists for the current user.",
        "Bind and validate UserConfigForm data, save changes, and provide feedback via Django messages.",
        "Render the user configuration template with the form and additional configuration context."
      ],
      "potential_issues": [
        "The imported `get_config`/`config` and logger are not used within the module, which may indicate leftover code.",
        "If `get_user_config(request.user)` does not include a `clara_version` key or raises an error, the view will fail when rendering.",
        "On invalid form submissions, no error handling or messages are provided; the form is simply re-rendered."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "user_config",
          "args_raw": [],
          "href_expr": "{% url 'user_config' %}",
          "element": "a",
          "attr": "href",
          "title": "Specify the GPT-4 model you want to use, optionally give an API key, and edit other related parameters.",
          "text": "Edit configuration information",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.user_config_views.user_config"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 484,
        "completion_tokens": 554,
        "total_tokens": 1038,
        "estimated_cost_usd": 0.006144999999999999
      }
    },
    {
      "url_name": "view_task_updates",
      "callable": "clara_app.task_update_views.view_task_updates",
      "module_repo_path": "clara_app/task_update_views.py",
      "short_summary": "This module defines Django views to show a user's recent task updates and to delete outdated update records. It leverages user-specific configuration for display and uses standard login and admin checks for access control, rendering a template with the relevant context or redirecting after cleanup.",
      "proposed_docstring": "Views for displaying recent task update messages to logged-in users and providing an administrative cleanup action. The module filters TaskUpdate records within a recent time window for the current user, renders them with configured CLARA version information, and allows admins to purge updates older than a set threshold with user feedback.",
      "key_responsibilities": [
        "Retrieve and display TaskUpdate entries from the past hour for the authenticated user, ordered by timestamp.",
        "Fetch user configuration to include CLARA version information in the task updates view.",
        "Provide an admin-only endpoint to delete task updates older than 30 days and notify via Django messages.",
        "Enforce authentication and administrative checks on the exposed views."
      ],
      "potential_issues": [
        "TaskUpdate is filtered on user_id using the username; if the model expects a numeric user ID, this may not match and return no updates.",
        "get_user_config is assumed to return a dict with a 'clara_version' key; missing config could raise a KeyError.",
        "delete_old_task_updates deletes all old updates across all users without confirmation or per-user scoping, which might be unexpected.",
        "The imported config and logger are currently unused, and there is no error handling around database operations."
      ],
      "ui_entrypoints": [
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "delete_old_task_updates",
          "args_raw": [],
          "href_expr": "{% url 'delete_old_task_updates' %}",
          "element": "a",
          "attr": "href",
          "title": "Remove all task updates more than 30 days old.",
          "text": "Delete old task updates",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.task_update_views.delete_old_task_updates"
        },
        {
          "attached_at": "2025-12-27T05:21:48.748505+00:00",
          "url_name": "view_task_updates",
          "args_raw": [],
          "href_expr": "{% url 'view_task_updates' %}",
          "element": "a",
          "attr": "href",
          "title": "Show trace output from C-LARA tasks produced during the last hour.",
          "text": "Recent task updates",
          "template_repo_path": "clara_app/templates/clara_app/base.html",
          "callable": "clara_app.task_update_views.view_task_updates"
        }
      ],
      "last_model": "gpt-5.1-codex-max",
      "last_usage": {
        "model": "gpt-5.1-codex-max",
        "prompt_tokens": 492,
        "completion_tokens": 777,
        "total_tokens": 1269,
        "estimated_cost_usd": 0.008385
      }
    }
  ]
}